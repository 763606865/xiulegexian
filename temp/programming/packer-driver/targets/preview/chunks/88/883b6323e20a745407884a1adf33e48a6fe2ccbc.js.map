{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/enemy/boss/Boss15.ts"],"names":["_decorator","find","instantiate","NodePool","em","plm","Boss","ccclass","property","Boss15","_skillData","_darkMaskPrefab","_blackHolePrefab","onLoad","bossData","dispatch","canMove","normalParticle","damage","normalDamage","initBossInfo","node","addPoolToPools","setBossStrategy","schedule","usingNormalParticleCircle","usingNormalParticleTriangle","usingDarkMask","dm","hwp","parent","setWorldPosition","x","y","getComponent","init","active","usingBlackHole","bh","getFromPool","isAccelerateToHero","dis","getDistanceToHero","_curSpeed","maxMS","t","accelerateToHero"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAUSA,MAAAA,U,OAAAA,U;AAAqCC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAA2BC,MAAAA,Q,OAAAA,Q;;AACtEC,MAAAA,E,iBAAAA,E;;AAGAC,MAAAA,G,iBAAAA,G;;AAIAC,MAAAA,I,iBAAAA,I;;;;;;AAlBT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;OAUM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;wBAGjBS,M,WADZF,OAAO,CAAC,QAAD,C,gBAAR,MACaE,MADb;AAAA;AAAA,wBACiC;AAAA;AAAA;AAAA,eAE7BC,UAF6B,GAEhB;AACT,8BAAkB;AACd,sBAAQ,gBADM;AAEd,wBAAU,IAFI;AAGd,0BAAY,CAHE;AAId,2BAAa,GAJC;AAKd,gCAAkB;AALJ,aADT;AAQT,qBAAS;AARA,WAFgB;AAAA,eAY7BC,eAZ6B;AAAA,eAa7BC,gBAb6B;AAAA;;AAc7BC,QAAAA,MAAM,GAAG;AACL,cAAIC,QAAQ,GAAG;AAAA;AAAA,wBAAGC,QAAH,CAAY,0BAAZ,EAAuC,iBAAvC,EAAyD,EAAzD,CAAf;AACAD,UAAAA,QAAQ,CAACE,OAAT,GAAmB,IAAnB;AACA,eAAKN,UAAL,CAAgBO,cAAhB,CAA+BC,MAA/B,GAAwCJ,QAAQ,CAACK,YAAjD;AACA,eAAKC,YAAL,CAAkBN,QAAlB;AACA,eAAKH,eAAL,GAAuBV,IAAI,CAAC,WAAD,EAAc,KAAKoB,IAAnB,CAA3B;AACA,eAAKT,gBAAL,GAAwBX,IAAI,CAAC,YAAD,EAAe,KAAKoB,IAApB,CAA5B;AACA;AAAA;AAAA,0BAAIC,cAAJ,CAAmB,WAAnB,EAAgC,IAAInB,QAAJ,EAAhC,EAAgD,KAAKS,gBAArD;AACA,eAAKW,eAAL;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIA,QAAAA,eAAe,GAAG;AACd,eAAKC,QAAL,CAAc,MAAM;AAChB,iBAAKC,yBAAL,CAA+B,EAA/B,EAAmC,GAAnC,EAAuC,GAAvC;AACH,WAFD,EAEG,CAFH,EADc,CAId;AACA;;AACA,eAAKD,QAAL,CAAc,MAAM;AAChB,iBAAKE,2BAAL,CAAiC,GAAjC;AACH,WAFD,EAEG,CAFH;AAGH,SAvC4B,CAyC7B;;;AACAC,QAAAA,aAAa,GAAG;AACZ,cAAIC,EAAO,GAAG1B,WAAW,CAAC,KAAKS,eAAN,CAAzB;AACA,cAAIkB,GAAG,GAAG;AAAA;AAAA,wBAAGd,QAAH,CAAY,iBAAZ,CAAV;AACAa,UAAAA,EAAE,CAACE,MAAH,GAAY7B,IAAI,CAAC,oBAAD,CAAhB;AACA2B,UAAAA,EAAE,CAACG,gBAAH,CAAoBF,GAAG,CAACG,CAAxB,EAA2BH,GAAG,CAACI,CAA/B,EAAkCJ,GAAG,CAACI,CAAtC;AACAL,UAAAA,EAAE,CAACM,YAAH,CAAgB,UAAhB,EAA4BC,IAA5B;AACAP,UAAAA,EAAE,CAACQ,MAAH,GAAY,IAAZ;AACH,SAjD4B,CAkD7B;;;AACAC,QAAAA,cAAc,GAAG;AACb,cAAIC,EAAO,GAAG;AAAA;AAAA,0BAAIC,WAAJ,CAAgB,WAAhB,CAAd;AACA,cAAIV,GAAG,GAAG;AAAA;AAAA,wBAAGd,QAAH,CAAY,iBAAZ,CAAV;AACAuB,UAAAA,EAAE,CAACR,MAAH,GAAY7B,IAAI,CAAC,oBAAD,CAAhB;AACAqC,UAAAA,EAAE,CAACP,gBAAH,CAAoBF,GAAG,CAACG,CAAxB,EAA2BH,GAAG,CAACI,CAA/B,EAAkCJ,GAAG,CAACI,CAAtC;AACAK,UAAAA,EAAE,CAACJ,YAAH,CAAgB,WAAhB,EAA6BC,IAA7B;AACAG,UAAAA,EAAE,CAACF,MAAH,GAAY,IAAZ;AACH,SA1D4B,CA2D7B;;;AACAI,QAAAA,kBAAkB,GAAG;AACjB,cAAIC,GAAG,GAAG,KAAKC,iBAAL,EAAV;;AACA,cAAID,GAAG,GAAG,IAAV,EAAgB;AACZ,iBAAKE,SAAL,GAAiB,KAAKjC,UAAL,CAAgBkC,KAAjC;AACA,gBAAIC,CAAC,GAAGJ,GAAG,GAAG,KAAKE,SAAnB;AACA,iBAAKG,gBAAL,CAAsBD,CAAtB;AACH;AACJ;;AAnE4B,O","sourcesContent":["/*\r\n * @Author: li_jiang_wei_12345 739671694@qq.com\r\n * @Date: 2022-11-08 18:06:01\r\n * @LastEditors: li_jiang_wei_12345 739671694@qq.com\r\n * @LastEditTime: 2022-12-14 17:53:51\r\n * @FilePath: \\to-be-immortal\\assets\\script\\enemy\\boss\\Boss15.ts\r\n * @Description: \r\n * \r\n * Copyright (c) 2022 by li_jiang_wei_12345 739671694@qq.com, All Rights Reserved. \r\n */\r\nimport { _decorator, Component, Node, Prefab, find, instantiate, approx, Vec2, NodePool } from 'cc';\r\nimport { em } from '../../global/EventManager';\r\nimport { ggd } from '../../global/globalData';\r\nimport { glf } from '../../global/globalFun';\r\nimport { plm } from '../../global/PoolManager';\r\nimport { Queue } from '../../global/Queue';\r\nimport { BlackHole } from '../skill/BlackHole';\r\nimport { DarkMask } from '../skill/DarkMask';\r\nimport { Boss } from './Boss';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Boss15')\r\nexport class Boss15 extends Boss {\r\n\r\n    _skillData = {\r\n        \"normalParticle\": {\r\n            \"name\": \"normalParticle\",\r\n            \"damage\": 9999,\r\n            \"duration\": 3,\r\n            \"moveSpeed\": 500,\r\n            \"canAttackTimes\": 1,\r\n        },\r\n        \"maxMS\": 800,\r\n    }\r\n    _darkMaskPrefab: Node;\r\n    _blackHolePrefab: Node;\r\n    onLoad() {\r\n        let bossData = em.dispatch(\"usingHeroBasePropertyFun\",\"getBossDataById\",15);\r\n        bossData.canMove = true;\r\n        this._skillData.normalParticle.damage = bossData.normalDamage;\r\n        this.initBossInfo(bossData);\r\n        this._darkMaskPrefab = find(\"/darkMask\", this.node);\r\n        this._blackHolePrefab = find(\"/blackHole\", this.node);\r\n        plm.addPoolToPools(\"blackHole\", new NodePool(), this._blackHolePrefab);\r\n        this.setBossStrategy();\r\n    }\r\n    /**\r\n     * @description: boss3 行动策略\r\n     * @strategy1 每4s 释放一次黑暗粒子圈\r\n     * @strategy2 每5s 释放一次黑暗笼罩 \r\n     * @strategy3 每5s 释放一次黑洞\r\n     */\r\n    setBossStrategy() {\r\n        this.schedule(() => {\r\n            this.usingNormalParticleCircle(20, 100,0.5);\r\n        }, 4);\r\n        // this.schedule(this.usingDarkMask, 5);\r\n        // this.schedule(this.usingBlackHole, 10);\r\n        this.schedule(() => {\r\n            this.usingNormalParticleTriangle(0.5);\r\n        }, 3);\r\n    }\r\n\r\n    //黑暗笼罩 将玩家困在黑暗笼罩中 无法动弹\r\n    usingDarkMask() {\r\n        let dm: any = instantiate(this._darkMaskPrefab);\r\n        let hwp = em.dispatch(\"getHeroWorldPos\");\r\n        dm.parent = find(\"Canvas/bulletLayer\");\r\n        dm.setWorldPosition(hwp.x, hwp.y, hwp.y);\r\n        dm.getComponent(\"DarkMask\").init();\r\n        dm.active = true;\r\n    }\r\n    // 黑洞\r\n    usingBlackHole() {\r\n        let bh: any = plm.getFromPool(\"blackHole\");\r\n        let hwp = em.dispatch(\"getHeroWorldPos\");\r\n        bh.parent = find(\"Canvas/bulletLayer\");\r\n        bh.setWorldPosition(hwp.x, hwp.y, hwp.y);\r\n        bh.getComponent(\"BlackHole\").init();\r\n        bh.active = true;\r\n    }\r\n    //是否加速冲向玩家\r\n    isAccelerateToHero() {\r\n        let dis = this.getDistanceToHero();\r\n        if (dis > 2000) {\r\n            this._curSpeed = this._skillData.maxMS;\r\n            let t = dis / this._curSpeed;\r\n            this.accelerateToHero(t);\r\n        }\r\n    }\r\n}\r\n\r\n"]}