{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/TSGFDemo/Demo/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/system/AudioManager.ts"],"names":["_decorator","Component","AudioSource","AudioClip","director","em","ccclass","property","AudioManager","onDestroy","remove","onLoad","add","switchMainBgm","bind","playOneShot","muteAudio","resumeAudio","addPersistRootNode","node","start","url","bgmPlayer","stop","dispatch","clip","play","effectPlayer","mute"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAUSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;AAAyBC,MAAAA,Q,OAAAA,Q;;AACzEC,MAAAA,E,iBAAAA,E;;;;;;AAXT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;OAGM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,WADZF,OAAO,CAAC,cAAD,C,UAEHC,QAAQ,CAACJ,SAAD,C,UAERI,QAAQ,CAACL,WAAD,C,UAERK,QAAQ,CAACL,WAAD,C,2BANb,MACaM,YADb,SACkCP,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAQxCQ,QAAAA,SAAS,GAAG;AACR;AAAA;AAAA,wBAAGC,MAAH,CAAU,eAAV;AACA;AAAA;AAAA,wBAAGA,MAAH,CAAU,aAAV;AACA;AAAA;AAAA,wBAAGA,MAAH,CAAU,WAAV;AACA;AAAA;AAAA,wBAAGA,MAAH,CAAU,aAAV;AACH;;AACDC,QAAAA,MAAM,GAAG;AACL;AAAA;AAAA,wBAAGC,GAAH,CAAO,eAAP,EAAwB,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAAxB;AACA;AAAA;AAAA,wBAAGF,GAAH,CAAO,aAAP,EAAsB,KAAKG,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAtB;AACA;AAAA;AAAA,wBAAGF,GAAH,CAAO,WAAP,EAAoB,KAAKI,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAApB;AACA;AAAA;AAAA,wBAAGF,GAAH,CAAO,aAAP,EAAsB,KAAKK,WAAL,CAAiBH,IAAjB,CAAsB,IAAtB,CAAtB;AACAV,UAAAA,QAAQ,CAACc,kBAAT,CAA4B,KAAKC,IAAjC,EALK,CAKkC;AAC1C;;AAEDC,QAAAA,KAAK,GAAG;AACJ,eAAKP,aAAL,CAAmB,mBAAnB;AACH,SAxBuC,CAyBxC;;;AACAA,QAAAA,aAAa,CAACQ,GAAD,EAAK;AACd,eAAKC,SAAL,CAAeC,IAAf;AACA;AAAA;AAAA,wBAAGC,QAAH,CAAY,qBAAZ,EAAmCH,GAAnC,EAAyCI,IAAD,IAAU;AAC9C,iBAAKH,SAAL,CAAeG,IAAf,GAAsBA,IAAtB;AACA,iBAAKH,SAAL,CAAeI,IAAf;AACH,WAHD;AAIH,SAhCuC,CAiCxC;;;AACAX,QAAAA,WAAW,CAACM,GAAD,EAAM;AACb;AAAA;AAAA,wBAAGG,QAAH,CAAY,qBAAZ,EAAmC,mBAAiBH,GAApD,EAA0DI,IAAD,IAAU;AAC/D,iBAAKE,YAAL,CAAkBZ,WAAlB,CAA8BU,IAA9B;AACH,WAFD;AAGH,SAtCuC,CAuCxC;;;AACAT,QAAAA,SAAS,GAAE;AACP,eAAKW,YAAL,CAAkBC,IAAlB,GAAyB,KAAzB;AACA,eAAKN,SAAL,CAAeM,IAAf,GAAsB,KAAtB;AACH,SA3CuC,CA4CxC;;;AACAX,QAAAA,WAAW,GAAE;AACT,eAAKU,YAAL,CAAkBC,IAAlB,GAAyB,IAAzB;AACA,eAAKN,SAAL,CAAeM,IAAf,GAAsB,IAAtB;AACH;;AAhDuC,O","sourcesContent":["/*\r\n * @Author: li_jiang_wei_12345 739671694@qq.com\r\n * @Date: 2022-10-09 17:52:38\r\n * @LastEditors: li_jiang_wei_12345 739671694@qq.com\r\n * @LastEditTime: 2022-10-26 15:35:14\r\n * @FilePath: \\copy9train\\assets\\script\\system\\AudioManager.ts\r\n * @Description: \r\n * \r\n * Copyright (c) 2022 by li_jiang_wei_12345 739671694@qq.com, All Rights Reserved. \r\n */\r\nimport { _decorator, Component, Node, game, AudioSource, AudioClip, input, Input, director } from 'cc';\r\nimport { em } from '../global/EventManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AudioManager')\r\nexport class AudioManager extends Component {\r\n    @property(AudioClip)\r\n    mainBGM: AudioClip;\r\n    @property(AudioSource)\r\n    bgmPlayer;\r\n    @property(AudioSource)\r\n    effectPlayer;\r\n\r\n    onDestroy() {\r\n        em.remove(\"switchMainBgm\");\r\n        em.remove(\"playOneShot\");\r\n        em.remove(\"muteAudio\");\r\n        em.remove(\"resumeAudio\");\r\n    }\r\n    onLoad() {\r\n        em.add(\"switchMainBgm\", this.switchMainBgm.bind(this));\r\n        em.add(\"playOneShot\", this.playOneShot.bind(this));\r\n        em.add(\"muteAudio\", this.muteAudio.bind(this));\r\n        em.add(\"resumeAudio\", this.resumeAudio.bind(this));\r\n        director.addPersistRootNode(this.node);//背包物品在各个场景皆可用到 设置为常驻节点\r\n    }\r\n\r\n    start() {\r\n        this.switchMainBgm(\"/audio/music/刀剑如梦\");\r\n    }\r\n    // 切换bgm\r\n    switchMainBgm(url){\r\n        this.bgmPlayer.stop();\r\n        em.dispatch(\"loadTheDirResources\", url, (clip) => {\r\n            this.bgmPlayer.clip = clip;\r\n            this.bgmPlayer.play();\r\n        });\r\n    }\r\n    //播放音效\r\n    playOneShot(url) {\r\n        em.dispatch(\"loadTheDirResources\", \"/audio/effect/\"+url, (clip) => {\r\n            this.effectPlayer.playOneShot(clip);\r\n        });\r\n    }\r\n    //静音\r\n    muteAudio(){\r\n        this.effectPlayer.mute = false;\r\n        this.bgmPlayer.mute = false;\r\n    }\r\n    //恢复音效\r\n    resumeAudio(){\r\n        this.effectPlayer.mute = true;\r\n        this.bgmPlayer.mute = true;\r\n    }\r\n}\r\n\r\n"]}