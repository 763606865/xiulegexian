{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/global/globalFun.ts"],"names":["Button","EventHandler","native","em","ggd","glf","createButton","scriptNode","buttonNode","scriptName","callbackName","param","flag","console","log","buttonHandler","target","component","handler","customEventData","button","getComponent","addComponent","clickEvents","getCirclePos","r","total","quarter","arr","i","y","Math","sin","PI","x","sqrt","push","getTimeDetail","newDate","Date","getTimeData","time","Array","join","slice","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getTriangleRow","rowTotal","initPos","unitGap","j","floor","playAd","platform","reflection","callStaticMethod","dispatch","afterPlayAdComplete","curAdRewardType","random","afterPlayAdError","getTwoPointFlyDir","p1","p2","dir","abs","towPointDisGreaterThanValue","v"],"mappings":"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","sourcesContent":["import { Button, Component, Contact2DType, EventHandler, native, Node, PhysicsSystem2D } from \"cc\";\r\nimport { em } from \"./EventManager\";\r\nimport { gUrl } from \"./GameUrl\";\r\nimport { ggd } from \"./globalData\";\r\nimport { hr } from \"./HttpRequest\";\r\n\r\nexport { glf }\r\n\r\n\r\nconst glf = {\r\n    //创建组件提供的按钮 或 修改内部调用 \r\n    createButton: (scriptNode: Node, buttonNode: Node, scriptName: string, callbackName: string, param: string = '') => {\r\n        let flag = scriptNode && buttonNode && scriptName && callbackName;\r\n        // console.log(\"scriptNode\", scriptNode);\r\n        // console.log(\"buttonNode\", buttonNode);\r\n        // console.log(\"scriptName\", scriptName);\r\n        // console.log(\"callbackName\", callbackName);\r\n        if (!flag) {\r\n            console.log(\"参数错误 无法生成按钮 请重新设置\");\r\n            return;\r\n        }\r\n        let buttonHandler = new EventHandler();\r\n        buttonHandler.target = scriptNode;\r\n        buttonHandler.component = scriptName;\r\n        buttonHandler.handler = callbackName;\r\n        buttonHandler.customEventData = param;\r\n        // console.log(buttonHandler);\r\n        let button = buttonNode.getComponent(Button);\r\n        if (!button) button = buttonNode.addComponent(Button);\r\n        button.clickEvents[0] = buttonHandler;//替换原先的\r\n        // console.log(\"button\", button);\r\n        // button.clickEvents.push(buttonHandler);\r\n        // console.log(\"创建成功\");\r\n    },\r\n    /**\r\n     * @description: 获取圆四周的点 \r\n     * @param {number} r 圆的半径\r\n     * @param {number} total 圆的总数\r\n     * @注 圆的总数必须是四的倍数\r\n     */\r\n    getCirclePos(r: number, total: number) {\r\n        if (total < 4) throw \"圆上点数过少 请输入大于4的数字\"\r\n        if (total % 4 !== 0) throw \"生成的在圆上的点的总数错误，不是4的倍数\" + total;\r\n        let quarter = total / 4;\r\n        let arr = [];\r\n        for (let i = 1; i < quarter; i++) {//第一象限\r\n            let y = r * Math.sin(Math.PI / 180 * i / quarter * 90);\r\n            let x = Math.sqrt(r * r - y * y);\r\n            arr.push([x, y], [x, -y], [-x, y], [-x, -y]);\r\n        };\r\n        arr.push([0, r], [0, -r], [r, 0], [-r, 0]);\r\n        return arr;\r\n    },\r\n    /**\r\n     * @description: 获取时间详情\r\n     * \r\n     */\r\n    getTimeDetail() {\r\n        var newDate = new Date();\r\n        //保留两位有效数字\r\n        let getTimeData = function (time) {\r\n            return (Array(2).join(\"0\") + time).slice(-2);\r\n        };\r\n        return newDate.getFullYear() + \".\" + (newDate.getMonth() + 1) + \".\" + newDate.getDate() + \"  \" +\r\n            getTimeData(newDate.getHours()) + \":\" + getTimeData(newDate.getMinutes()) +\r\n            \":\" + getTimeData(newDate.getSeconds());\r\n    },\r\n    //获得三角形队列\r\n    getTriangleRow(rowTotal) {\r\n        let initPos = { x: 0, y: 0 };\r\n        let arr = [];\r\n        let unitGap = 50;\r\n        for (let i = 0; i < rowTotal; i++) {\r\n            let total = i + 1;\r\n            arr[i] = [];\r\n            for (let j = 0; j < total; j++) {\r\n                if (total % 2 == 0) {//偶数层 2 4 6\r\n                    arr[i].push([initPos.x + j * unitGap - Math.floor(total / 2) * unitGap + unitGap / 2, initPos.y]);\r\n                } else {  //奇数层  1 3 5 整体作揖unitGap/2 个单位\r\n                    arr[i].push([initPos.x + j * unitGap - Math.floor(total / 2) * unitGap, initPos.y]);\r\n                }\r\n            }\r\n        }\r\n        return arr;\r\n    },\r\n    playAd() {\r\n        switch (ggd.platform) {\r\n            case \"GooglePlay\":\r\n                native.reflection.callStaticMethod(\"com/cocos/game/AppActivity\", \"createAds\", \"()V\");\r\n                break;\r\n            case \"wxGame\":\r\n                em.dispatch(\"showWxVideoAd\");\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    // 广告播放成功后的回调\r\n    afterPlayAdComplete() {\r\n        switch (ggd.curAdRewardType) {\r\n            case \"getItems\":\r\n                em.dispatch(\"getItemsRewardByAds\");\r\n                break;\r\n            case \"rebirthHero\":\r\n                em.dispatch(\"rebirthHero\");\r\n                break;\r\n            case \"getDoubleReward\":\r\n                em.dispatch(\"getDoubleReward\");\r\n                break;\r\n            case \"getAllUpgradeReward\":\r\n                em.dispatch(\"usingWeaponManagerFun\", \"getAllUpgradeRewardComplete\");\r\n                break;\r\n            case \"updateUpgradeReward\":\r\n                em.dispatch(\"usingWeaponManagerFun\", \"updateUpgradeRewardComplete\");\r\n                break;\r\n\r\n            case \"getEquBox\":\r\n                console.log(\"领取装备箱子\");\r\n                let random = Math.random();\r\n                if (random > 0.995) {\r\n                    em.dispatch(\"addItemToSS\", \"史诗装备箱\", 1);\r\n                    em.dispatch(\"showGets\", { \"史诗装备箱\": 1 });\r\n                } else if (random > 0.98) {\r\n                    em.dispatch(\"addItemToSS\", \"传说装备箱\", 1);\r\n                    em.dispatch(\"showGets\", { \"传说装备箱\": 1 });\r\n                } else if (random > 0.8) {\r\n                    em.dispatch(\"addItemToSS\", \"稀有装备箱\", 1);\r\n                    em.dispatch(\"showGets\", { \"稀有装备箱\": 1 });\r\n                } else {\r\n                    em.dispatch(\"addItemToSS\", \"实用装备箱\", 1);\r\n                    em.dispatch(\"showGets\", { \"实用装备箱\": 1 });\r\n                }\r\n                em.dispatch(\"usingGameRewardFun\", \"afterPlayEquVideo\");\r\n                em.dispatch(\"usingHeroInfoLayerFun\", \"isShowAdBtn\");\r\n                break;\r\n            default:\r\n                em.dispatch(\"tipsViewShow\", \"参数类型错误：\" + ggd.curAdRewardType);\r\n                break;\r\n        }\r\n\r\n        // let url = gUrl.list.adClickCount;\r\n        // let data = null;\r\n        // hr.post(url, data, () => { });\r\n    },\r\n    // 广告播放失败后的回调\r\n    afterPlayAdError() {\r\n        switch (ggd.curAdRewardType) {\r\n            case \"getItems\":\r\n                em.dispatch(\"tipsViewShow\", \"获取奖励失败\");\r\n                break;\r\n            case \"rebirthHero\":\r\n                em.dispatch(\"closeRebirthAd\");\r\n                break;\r\n            case \"getDoubleReward\":\r\n                em.dispatch(\"closeGetDoubleRewardAd\");\r\n                break;\r\n            case \"getEquBox\":\r\n                em.dispatch(\"tipsViewShow\", \"获取奖励失败\");\r\n                break;\r\n            case \"getAllUpgradeReward\":\r\n                em.dispatch(\"tipsViewShow\", \"获取奖励失败\");\r\n                break;\r\n            case \"updateUpgradeReward\":\r\n                em.dispatch(\"tipsViewShow\", \"刷新奖励失败\");\r\n                break;\r\n            default:\r\n                em.dispatch(\"tipsViewShow\", \"参数类型错误：\" + ggd.curAdRewardType);\r\n                break;\r\n        }\r\n    },\r\n    //获取两点间的飞行方向\r\n    getTwoPointFlyDir(p1, p2) {\r\n        // console.log(\"p1\",p1);\r\n        // console.log(\"p2\",p2);\r\n        let x = p1.x - p2.x;\r\n        let y = p1.y - p2.y;\r\n        let dir = { x: 0, y: 0 }\r\n        if (x === 0 && y === 0) {\r\n            dir.x = 1;\r\n            dir.y = 0;\r\n        } else if (x === 0) {\r\n            dir.x = 0;\r\n            dir.y = Math.abs(y) / y;\r\n        } else if (y === 0) {\r\n            dir.x = Math.abs(x) / x;\r\n            dir.y = 0;\r\n        } else if (Math.abs(x) >= Math.abs(y)) {\r\n            dir.x = Math.abs(x) / x;\r\n            dir.y = y / Math.abs(x);\r\n        } else {\r\n            dir.x = x / Math.abs(y);\r\n            dir.y = Math.abs(y) / y;\r\n        }\r\n        return dir;\r\n    },\r\n    //两点间的距离是否大于某值\r\n    towPointDisGreaterThanValue(p1, p2, v) {\r\n        let x = p1.x - p2.x;\r\n        let y = p1.y - p2.y;\r\n        return x * x + y * y > v;\r\n    },\r\n}\r\n\r\n\r\n\r\n\r\n"]}