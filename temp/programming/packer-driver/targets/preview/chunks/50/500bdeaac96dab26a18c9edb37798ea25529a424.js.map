{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/enemy/boss/Boss10.ts"],"names":["_decorator","NodePool","find","em","ggd","plm","Queue","Boss5","ccclass","property","Boss10","_skillData","onLoad","bossData","dispatch","canMove","normalDamage","addPoolToPools","skillPrefab","initBossInfo","setBossStrategy","usingSkillGreenThunderAllTheTime","schedule","isUsingSkillPhotosynthesis","isAccelerateToHero","usingSkillCollectionGT","stopAll","total","Error","queue","prefab","getFromPool","enqueue","createFun","gt","dequeue","getComponent","init","hwp","parent","setWorldPosition","x","y","unschedule"],"mappings":"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","sourcesContent":["/*\r\n * @Author: li_jiang_wei_12345 739671694@qq.com\r\n * @Date: 2022-11-08 10:32:30\r\n * @LastEditors: li_jiang_wei_12345 739671694@qq.com\r\n * @LastEditTime: 2022-11-10 11:51:29\r\n * @FilePath: \\copy9train\\assets\\script\\enemy\\boss\\Boss2.ts\r\n * @Description: \r\n * \r\n * Copyright (c) 2022 by li_jiang_wei_12345 739671694@qq.com, All Rights Reserved. \r\n */\r\nimport { _decorator, Component, Node, NodePool, find } from 'cc';\r\nimport { em } from '../../global/EventManager';\r\nimport { ggd } from '../../global/globalData';\r\nimport { plm } from '../../global/PoolManager';\r\nimport { Queue } from '../../global/Queue';\r\nimport { Boss5 } from './Boss5';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Boss10')\r\nexport class Boss10 extends Boss5 {\r\n\r\n    _skillData = {\r\n        \"1\": 299,//绿色闪电\r\n        \"2\": 600,//加速\r\n        \"3\": 1500,//回血量\r\n        \"4\": 5000//普通攻击\r\n    }\r\n    onLoad() {\r\n        \r\n        let bossData = em.dispatch(\"usingHeroBasePropertyFun\",\"getBossDataById\",10);\r\n        bossData.canMove = true;\r\n        this._skillData[4] = bossData.normalDamage;\r\n        plm.addPoolToPools(\"greenThunder\", new NodePool(), this.skillPrefab);\r\n        this.initBossInfo(bossData);\r\n        this.setBossStrategy();\r\n    }\r\n    /**\r\n    * @description:设置boss 攻击策略\r\n    * @Strategy1 每隔5s释放一次闪电\r\n    * @Strategy2 血量低于1/3 时 释放一次 cd30s 持续回血15s 每秒恢复skillData[3]\r\n    * @Strategy3 距离超过2000px 自动使用\r\n    * @Strategy4 @function usingSkillCollectionGT 每过10s  释放一次聚集的GT\r\n    */\r\n    setBossStrategy() {\r\n        this.usingSkillGreenThunderAllTheTime(2);\r\n        this.schedule(this.isUsingSkillPhotosynthesis, 1);\r\n        this.schedule(this.isAccelerateToHero, 1);\r\n        this.schedule(this.usingSkillCollectionGT, 10);\r\n    }\r\n    //每过10s  释放一次聚集的GT\r\n    usingSkillCollectionGT() {\r\n        if(ggd.stopAll) return;\r\n        let total = 20;\r\n        if (total <= 0) throw new Error(\"error\");\r\n        let queue = new Queue();\r\n        while (total > 0) {\r\n            let prefab = plm.getFromPool(\"greenThunder\");\r\n            queue.enqueue(prefab)\r\n            total--;\r\n        }\r\n        let createFun = () => {\r\n            if (ggd.stopAll) return;\r\n            let gt = queue.dequeue();\r\n            if (gt) {\r\n                gt.getComponent(\"EnemySkill\").init(this._skillData[1]);\r\n                let hwp = em.dispatch(\"getHeroWorldPos\");\r\n                gt.parent = find(\"Canvas/bulletLayer\");\r\n                gt.setWorldPosition(hwp.x, hwp.y + 100, hwp.y);\r\n            } else this.unschedule(createFun);\r\n        }\r\n        this.schedule(createFun,0.3);\r\n    }\r\n}\r\n\r\n"]}