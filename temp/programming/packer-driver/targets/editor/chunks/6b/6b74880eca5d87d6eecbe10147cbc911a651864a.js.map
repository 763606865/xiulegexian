{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/Cocos/ZA/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/hero/weapon/weaponManager.ts"],"names":["_decorator","Component","Node","NodePool","find","instantiate","Sprite","Material","JsonAsset","Vec2","Label","Animation","em","ggd","glf","plm","Queue","ccclass","property","weaponManager","_thousandsSwordToTombQueue","_fireBloomQueue","_hellFireQueue","_swordLv","_guardLv","_spellLv","_dartsLv","_spiritBulletLv","_flySwordLv","_skyThunderLv","_iceSpiritNeedleLv","_taijihuanLv","_landFireLv","_rewardConfig","_curAllURList","_weaponData","_equWeaTotalCD","_equWeaCurTime","_rogueSkillCDList","_rogueUltimateSkillCDList","onDestroy","remove","onLoad","add","updateSelectWeapon","bind","getWeaponDataByIdOrName","usingWeaponManagerFun","getWeaponManagerProperty","initWeaponData","initWeaponConfig","dynamicLoadPrefabs","startUsingWeapon","usingEqu","initSelectWeaponAd","isUsingSpiritBullet","usingMaxLvWeapon","isUsingSword","isUsingDarts","isUsingGuard","isUsingSpell","isUsingIceSpiritNeedle","all","weaponDataJson","json","forEach","element","id","name","loadPrefab","fileName","callback","defaultUrl","dispatch","assets","addPoolToPools","isOpenAd","active","getAllUpgradeReward","curAdRewardType","playAd","updateUpgradeReward","bool","console","log","spellPar","node","data","total","bonusTotal","openSpell","radius","par","i","children","length","child","putToPool","unitR","Math","PI","unitA","arr","radian","x","cos","y","sin","push","pos","spell","getFromPool","initSpell","interval","unschedule","spellParRotate","schedule","angle","parent","setPosition","getComponent","init","stopAll","rotationSpeed","isOpenSpellUltimateSkill","usingSpellUltimateSkill","t","speed","times","curPos","getPosition","guard","scale","setScale","script","isOpenGuardUltimateSkill","usingGuardUltimateSkill","rawScale","fun","getScale","z","spiritBullet","createSpiritBullet","flyDir","initPosArr","getFlySwordInitPos","scheduleOnce","initSpiritBullet","initPos","layer","wp","setWorldPosition","getFlyDirByCurPos","target","getTwoPointFlyDir","isOpenSpiritBulletUltimateSkill","usingSpiritBulletUltimateSkill","sword","createSword","curDirection","initSword","getFlyDir","unit","m","n","dir","usingSwordUltimateSkill","r","getCirclePos","isOpenSwordUltimateSkill","isUsingFlySword","openFlySword","usingFlySwordUltimateSkill","isOpenFlySwordUltimateSkill","darts","createDarts","curAimDir","flyDirArr","getFlyDirArr","initDarts","floor","maxLevel","isOpenDartsUltimateSkill","iceSpiritNeedle","createIceSpiritNeedle","flyDirs","initIceSpiritNeedle","getRandomFlyDir","random","isOpenIceSpiritNeedleUltimateSkill","isUsingSkyThunder","skyThunder","createSkyThunder","initSkyThunder","isOpenSkyThunderUltimateSkill","isUsingLandFire","landFire","createLandFire","dirs","initLandFire","isOpenLandFireUltimateSkill","isUsingTaijihuan","taijihuan","createTaijihuan","initTaijihuan","isOpenTaijihuanUltimateSkill","getRotationDir","x2","y2","getUpgradeReward","e","type","btnNodes","getChildByName","spriteFrame","restoreHP","isHasWeaponByName","upgradeWeaponByWeaponName","stop","getAllUpgradeRewardComplete","updateUpgradeRewardComplete","playBtnNodeAnim","index","play","count","randomArr","indexOf","noStarArr","sprite","createButton","mainNode","label","label2","updateUpgradeWeaponDescription","starPar","lv","starPurple","playStar","playStarWink","wName","string","name2","wn","wn2","getNewStringFirstLetterToUpperCase","deleteFillLevelWeaponFromRewardConfig","str","toUpperCase","substring","splice","getWeaponDes","swordLv","guardLv","spellLv","dartsLv","spiritBulletLv","skyThunderLv","flySwordLv","id_name","hasOwnProperty","param","usingSkillSwordRain","spx","unitX","swordRain","initSwordRain","xOffset","skillData","duration","damage","baseDamage","usingSkillJustOneSwordDivideWorld","prefab","initJustOneSwordDivideWorld","changeAngle","unitChange","recoveryToPool","usingSkillThousandsSwordToTomb","enqueue","createThousandsSwordToTomb","dequeue","initThousandsSwordToTomb","moveDistance","usingSkillIceCone","initIceCone","usingSkillFireBloom","createFireBloom","usingSkillHellFire","createHellFire","usingSkillMoveLikeFire","createMoveLikeFire","usingSkillDangerWindToNear","dirArr","usingSkillDoomsdayStorm","queue","usingSkillThunderRunning","usingSkillThunderFissionBead","equWeaponCDProgress","usingEquWeapon","getCurUsingWeaponAttackInterval","qData","effect","updateEquWeaProgress","fillRange","weapon","createLongSword","createGiantSword","createGiantAxe","createRotationAxe","createGiantArrow","createContinueArrow","usingLongSword","initLongSword","usingGiantSword","giantSword","initGiantSword","usingGiantAxe","giantAxe","initGiantAxe","usingRotationAxe","rotationAxe","initRotationAxe","usingGiantArrow","giantArrow","initGiantArrow","usingContinueArrow","continueArrow","initContinueArrow","lData","attackInterval","createShockWave","shockWave","initShockWave"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab, NodePool, find, CircleCollider2D, instantiate, tween, BoxCollider2D, SpriteFrame, Sprite, Button, Material, JsonAsset, resources, Asset, Vec2, Label, math, ColorKey, Color, Vec3, Animation } from 'cc';\r\nimport { em } from '../../global/EventManager';\r\nimport { ggd, tagData } from '../../global/globalData';\r\nimport { glf } from '../../global/globalFun';\r\nimport { plm } from '../../global/PoolManager';\r\nimport { Queue } from '../../global/Queue';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('WeaponManager')\r\nexport class weaponManager extends Component {\r\n\r\n    @property(Sprite)\r\n    equWeaponCDProgress;\r\n    @property(JsonAsset)\r\n    weaponDataJson;\r\n    @property(Node)\r\n    btnNodes: Node[] = [];\r\n    @property(Material)\r\n    defaultMaterial: Material = null;\r\n\r\n    _thousandsSwordToTombQueue: Queue = new Queue();\r\n    _fireBloomQueue: Queue = new Queue();\r\n    _hellFireQueue: Queue = new Queue();\r\n\r\n\r\n    /**\r\n     * @description:私有属性命名规范 所有等级 命名为 \"_\" + weaponName +\"Lv\" \r\n     */\r\n    _swordLv: number = 0;\r\n    _guardLv: number = 0;\r\n    _spellLv: number = 0;\r\n    _dartsLv: number = 0;\r\n    _spiritBulletLv: number = 0;\r\n    _flySwordLv: number = 0;\r\n    _skyThunderLv: number = 0;\r\n    _iceSpiritNeedleLv: number = 0;\r\n    _taijihuanLv: number = 0;\r\n    _landFireLv: number = 0;\r\n\r\n    _rewardConfig: any = null;\r\n    _curAllURList = [];\r\n\r\n    //动态加载\r\n    _weaponData: object = {};\r\n\r\n    //装备cd \r\n    _equWeaTotalCD: number;\r\n    _equWeaCurTime: number;\r\n\r\n    //rogue技能cd\r\n    _rogueSkillCDList = {\r\n        \"spiritBullet\": 1.8,//手里剑\r\n        \"sword\": 1.2,//剑\r\n        \"darts\": 3.1,//飞镖\r\n        \"iceSpiritNeedle\": 3.5,//冰魄神针\r\n        \"skyThunder\": 4.7,//天雷\r\n        \"landFire\": 14.3,//地火\r\n        \"taijihuan\": 2.6,//太极环\r\n    }\r\n    // rogue大招CD\r\n    _rogueUltimateSkillCDList = {\r\n        \"spell\": 15,\r\n        \"guard\": 8,\r\n        \"sword\": 8.3,\r\n    }\r\n    onDestroy() {\r\n        em.remove(\"updateSelectWeapon\");\r\n        em.remove(\"getWeaponDataByIdOrName\");\r\n        em.remove(\"usingWeaponManagerFun\");\r\n        em.remove(\"getWeaponManagerProperty\");\r\n    }\r\n    onLoad() {\r\n\r\n        em.add(\"updateSelectWeapon\", this.updateSelectWeapon.bind(this));\r\n        em.add(\"getWeaponDataByIdOrName\", this.getWeaponDataByIdOrName.bind(this));\r\n        em.add(\"usingWeaponManagerFun\", this.usingWeaponManagerFun.bind(this));\r\n        em.add(\"getWeaponManagerProperty\", this.getWeaponManagerProperty.bind(this));\r\n        this.initWeaponData();\r\n        this.initWeaponConfig();\r\n        this.dynamicLoadPrefabs();\r\n        this.startUsingWeapon();\r\n\r\n        this.usingEqu();\r\n        this.initSelectWeaponAd();\r\n    }\r\n    startUsingWeapon() {\r\n        this._spiritBulletLv = 1;\r\n        this.isUsingSpiritBullet(true);\r\n        // this._landFireLv=1;\r\n        // this.isUsingLandFire(true);\r\n        // this._taijihuanLv = 4;\r\n        // this.isUsingTaijihuan(true);\r\n        // this._iceSpiritNeedleLv = 3;\r\n        // this.isUsingIceSpiritNeedle(true);\r\n        // this._skyThunderLv = 3;\r\n        // this.isUsingSkyThunder(true);\r\n        // this._swordLv = 1;\r\n        // this.isUsingSword(true);\r\n        // this._guardLv = 4;\r\n        // this.isUsingGuard(true);\r\n        // this._dartsLv = 1;\r\n        // this.isUsingDarts(true);\r\n        // this._spellLv = 1;\r\n        // this.isUsingSpell(true);\r\n        // this.usingMaxLvWeapon();\r\n    }\r\n    usingMaxLvWeapon() {\r\n        this._swordLv = 4;\r\n        this._guardLv = 4;\r\n        this._spellLv = 4;\r\n        this._dartsLv = 4;\r\n        this._spiritBulletLv = 4;\r\n        this.isUsingSword(true);\r\n        this.isUsingDarts(true);\r\n        this.isUsingGuard(true);\r\n        this.isUsingSpell(true);\r\n        this.isUsingSpiritBullet(true);\r\n        this._iceSpiritNeedleLv = 4;\r\n        this.isUsingIceSpiritNeedle(true);\r\n    }\r\n    initWeaponData() {\r\n        let all = this.weaponDataJson.json;\r\n        all.forEach(element => {\r\n            let id = element.id;\r\n            let name = element.name;\r\n            this._weaponData[id] = element;\r\n            this._weaponData[name] = element;\r\n        });\r\n        // console.log(this.weaponDataJson);\r\n        // console.log(this._weaponData);\r\n    }\r\n    /**\r\n     * @description: 初始化升级奖励配置\r\n     * \"daofaguo\", \"treasureChest\", \"partSkillBook\", 物品奖励配置 后期添加\r\n     * 无等级上限的配置：\"restoreHP\"：回血。\"addMoveSpeed\"：加速。\"addCriticalHitRate\"：加暴击。  \r\n     */\r\n    initWeaponConfig() {\r\n\r\n        this._rewardConfig = [\r\n            \"restoreHP\", \"addMoveSpeed\", \"addCriticalHitRate\",\r\n            \"sword\", \"guard\", \"spell\", \"darts\", \"spiritBullet\",\r\n            \"flySword\", \"skyThunder\", \"iceSpiritNeedle\", \"taijihuan\",\r\n            \"landFire\"\r\n        ]\r\n        // this._rewardConfig = [\r\n        //     \"restoreHP\", \"addMoveSpeed\", \"addCriticalHitRate\",\r\n        //     \"sword\", \"guard\", \"spell\", \"darts\", \"spiritBullet\",\r\n        //     \"flySword\", \"skyThunder\", \"iceSpiritNeedle\", \"taijihuan\"\r\n        // ]\r\n    }\r\n    // 动态加载预制件\r\n    dynamicLoadPrefabs() {\r\n        this.loadPrefab(\"sword\");\r\n        this.loadPrefab(\"darts\");\r\n        this.loadPrefab(\"spell\");\r\n        this.loadPrefab(\"spiritBullet\");\r\n        this.loadPrefab(\"flySword\");\r\n        this.loadPrefab(\"thousandsSwordToTomb\");\r\n        this.loadPrefab(\"justOneSwordDivideWorld\");\r\n        this.loadPrefab(\"swordRain\");\r\n        this.loadPrefab(\"iceCone\");\r\n        this.loadPrefab(\"fireBloom\");\r\n        this.loadPrefab(\"hellFire\");\r\n        this.loadPrefab(\"moveLikeFire\");\r\n        this.loadPrefab(\"dangerWindToNear\");\r\n        this.loadPrefab(\"doomsdayStorm\");\r\n        this.loadPrefab(\"thunderRunning\");\r\n        this.loadPrefab(\"thunderFissionBead\");\r\n        this.loadPrefab(\"skyThunder\");\r\n        this.loadPrefab(\"iceSpiritNeedle\");\r\n        this.loadPrefab(\"taijihuan\");\r\n        // this.scheduleOnce(() => {\r\n        //     console.log(\"plm\", plm);\r\n        // }, 5);\r\n    }\r\n    //加载预制件\r\n    loadPrefab(fileName, callback = null) {\r\n        let defaultUrl = \"/prefabs/hero/weapon/\"\r\n        // let prefabString = \"_\" + fileName + \"Prefab\";\r\n        em.dispatch(\"loadTheDirResources\", defaultUrl + fileName, (assets) => {\r\n            if (callback) callback(assets);\r\n            else {\r\n                // this[prefabString] = assets;\r\n                plm.addPoolToPools(fileName, new NodePool(), assets);\r\n            }\r\n        });\r\n    }\r\n    // 初始化选择武器界面的广告\r\n    initSelectWeaponAd() {\r\n        if (ggd.isOpenAd) {\r\n            find(\"Canvas/heroLayer/GameUILayer/selectWeapon/getAll\").active = true;\r\n            find(\"Canvas/heroLayer/GameUILayer/selectWeapon/updateAll\").active = true;\r\n        } else {\r\n            find(\"Canvas/heroLayer/GameUILayer/selectWeapon/getAll\").active = false;\r\n            find(\"Canvas/heroLayer/GameUILayer/selectWeapon/updateAll\").active = false;\r\n        }\r\n    }\r\n    getAllUpgradeReward(){\r\n        ggd.curAdRewardType = \"getAllUpgradeReward\";\r\n        glf.playAd();\r\n    }\r\n    updateUpgradeReward(){\r\n        ggd.curAdRewardType = \"updateUpgradeReward\";\r\n        glf.playAd();\r\n    }\r\n    //======================护符相关=======================\r\n    // 是否开启护符\r\n    isUsingSpell(bool: boolean) {\r\n        console.log(\"初始化护符\");\r\n\r\n        let spellPar = find(\"spellPar\", this.node);\r\n        spellPar.active = bool;\r\n        if (!bool) return;\r\n        // let total = weaponData.spell.lv[this._spellLv - 1];\r\n        let data = this.getWeaponDataByIdOrName(\"spell\");\r\n        let total = data.total[this._spellLv - 1];\r\n        let bonusTotal = em.dispatch(\"getHeroControlProperty\", \"_bonusBulletTotal\");\r\n        total += bonusTotal;\r\n        this.openSpell(total);\r\n    }\r\n    //开启护符\r\n    openSpell(total: number, radius: number = 180) {\r\n        if (radius <= 10) return console.log(\"半径过小\");\r\n        let par = find(\"spellPar\", this.node);\r\n        for (let i = 0; i < par.children.length; i++) {\r\n            let child = par.children[i];\r\n            plm.putToPool(\"spell\", child);\r\n            i--;\r\n        };\r\n        let unitR = Math.PI * 2 / total;//单位弧度\r\n        let unitA = 360 / total;//单位角度\r\n        let arr = [];\r\n        for (let i = 0; i < total; i++) {\r\n            let radian = i * unitR;\r\n            let x = Math.cos(radian) * radius;\r\n            let y = Math.sin(radian) * radius;\r\n            arr.push([x, y]);\r\n        };\r\n        // console.log(arr);\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let pos = arr[i];\r\n            let spell = plm.getFromPool(\"spell\");\r\n            if (spell) {\r\n                this.initSpell(spell, pos, i * unitA);\r\n            } else {\r\n                this.loadPrefab(\"spell\", (assets) => {\r\n                    plm.addPoolToPools(\"spell\", new NodePool(), assets);\r\n                    spell = plm.getFromPool(\"spell\");\r\n                    this.initSpell(spell, pos, i * unitA);\r\n                });\r\n            }\r\n        };\r\n        let interval = 1 / 60;\r\n        this.unschedule(this.spellParRotate);\r\n        this.schedule(this.spellParRotate, interval);\r\n    }\r\n    initSpell(spell, pos, angle) {\r\n        let data = this.getWeaponDataByIdOrName(\"spell\");\r\n        spell.parent = find(\"spellPar\", this.node);\r\n        spell.setPosition(pos[0], pos[1], 0);\r\n        spell.angle = angle;\r\n        spell.getComponent(\"Spell\").init(data, this._spellLv);\r\n    }\r\n    // 护符旋转\r\n    spellParRotate() {\r\n        if (ggd.stopAll) return;\r\n        let par = find(\"spellPar\", this.node);\r\n        let interval = 1 / 60;\r\n        let rotationSpeed = 180 * interval;\r\n        par.angle += rotationSpeed;\r\n    }\r\n    //是否开启 护符 大招\r\n    isOpenSpellUltimateSkill(bool: boolean) {\r\n        if (bool) {\r\n            this.usingSpellUltimateSkill();//立即释放一次\r\n            let t = this._rogueUltimateSkillCDList.spell;\r\n            this.schedule(this.usingSpellUltimateSkill, t);\r\n        } else {\r\n            this.unschedule(this.usingSpellUltimateSkill);\r\n        }\r\n    }\r\n    //护符 大招\r\n    usingSpellUltimateSkill() {\r\n        if (ggd.stopAll) return;\r\n        console.log(\"释放护符大招\");\r\n        let total = 12;\r\n        let radius = 150;\r\n        let par = find(\"spellPar\", this.node);\r\n        let data = this.getWeaponDataByIdOrName(\"spell\");\r\n        // let par = find(\"Canvas/bulletLayer\");\r\n        let interval = 1 / 60;//旋转间隔 \r\n        let speed = 3;//离开原点的速度\r\n        let unitR = Math.PI * 2 / total;//单位弧度\r\n        let unitA = 360 / total;//单位角度\r\n        let arr = [];\r\n        for (let i = 0; i < total; i++) {\r\n            let radian = i * unitR;\r\n            let x = Math.cos(radian) * radius;\r\n            let y = Math.sin(radian) * radius;\r\n            arr.push([x, y]);\r\n        };\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let pos = arr[i];\r\n            let spell = plm.getFromPool(\"spell\");//能释放大招 spell 一定加载完毕 无需防护动态加载\r\n            spell.getComponent(\"Spell\").init(data, this._spellLv);\r\n            spell.parent = par;\r\n            spell.setPosition(pos[0], pos[1], 0);\r\n            let angle = i * unitA;\r\n            spell.angle = angle;\r\n            let times = 60;//旋转消失次数\r\n            let callback = () => {\r\n                if (ggd.stopAll) return;\r\n                times--;\r\n                let curPos = spell.getPosition();\r\n                let x = pos[0] / radius * speed;\r\n                let y = pos[1] / radius * speed;\r\n                x *= 2;\r\n                y *= 2;\r\n                spell.setPosition(curPos.x + x, curPos.y + y, 0);\r\n            };\r\n            this.schedule(callback, interval);\r\n        };\r\n\r\n        this.unschedule(this.spellParRotate);\r\n        this.schedule(this.spellParRotate, interval);\r\n    }\r\n    // =================波动阵====================\r\n    //开启波动阵\r\n    isUsingGuard(bool: boolean) {\r\n        let guard = find(\"guard\", this.node);\r\n        guard.active = bool;\r\n        if (!bool) return;\r\n        let data = this.getWeaponDataByIdOrName(\"guard\");\r\n        let scale = data.total[this._guardLv - 1];\r\n        guard.setScale(scale, scale);\r\n        let script: any = guard.getComponent(\"Guard\");\r\n        script.init(data, this._guardLv);\r\n        guard.active = true;\r\n\r\n    }\r\n    //是否开启波动阵大招\r\n    isOpenGuardUltimateSkill(bool: boolean) {\r\n        this.schedule(() => {\r\n            if (ggd.stopAll) return;\r\n            this.usingGuardUltimateSkill();\r\n        }, this._rogueUltimateSkillCDList.guard);\r\n        // this.usingGuardUltimateSkill();\r\n        // em.dispatch(\"usingHeroControlFun\", \"updatePercentageBloodProgress\", 0.02);//每秒恢复2%最大生命值\r\n    }\r\n    // 使用波动阵大招 全屏扩张一次  未开发完，暂不开启\r\n    usingGuardUltimateSkill() {\r\n        console.log(\"开启波动阵大招\");\r\n        let guard = find(\"guard\", this.node);\r\n        let data = this.getWeaponDataByIdOrName(\"guard\");\r\n        let rawScale = data.total[this._guardLv - 1];\r\n        let times = 6;\r\n        let t = 0.1;\r\n        let fun = () => {\r\n            if (ggd.stopAll) return;\r\n            let scale = guard.getScale();\r\n            times -= t * 2;\r\n            if (times > 0) {\r\n                guard.setScale(scale.x + t * 2, scale.y + t * 2, scale.z);\r\n            } else {\r\n                guard.setScale(rawScale, rawScale, 1);\r\n                this.unschedule(fun);\r\n            }\r\n        }\r\n        this.schedule(fun, t);\r\n    }\r\n\r\n    //================手里剑相关=====================\r\n    // 是否使用手里剑\r\n    isUsingSpiritBullet(bool: boolean) {\r\n        if (bool) {\r\n            let interval = this._rogueSkillCDList.spiritBullet;\r\n            this.schedule(this.createSpiritBullet, interval);\r\n        } else {\r\n            this.unschedule(this.createSpiritBullet);\r\n        }\r\n    }\r\n    //创建手里剑\r\n    createSpiritBullet() {\r\n        if (ggd.stopAll) return;\r\n        let flyDir = em.dispatch(\"usingHeroControlFun\", \"seekTreeFirstEnemyDir\");\r\n        if (!flyDir) return;\r\n        let data = this.getWeaponDataByIdOrName(\"spiritBullet\");\r\n        let total = data.total[this._spiritBulletLv - 1];\r\n        // console.log(\"flyDir\",flyDir);\r\n\r\n        let bonusTotal = em.dispatch(\"getHeroControlProperty\", \"_bonusBulletTotal\");\r\n        total += bonusTotal;\r\n        if (!total) throw \"total err,total is \" + total;\r\n        let initPosArr = this.getFlySwordInitPos(total);\r\n        for (let i = 0; i < total; i++) {\r\n            let spiritBullet = plm.getFromPool(\"spiritBullet\");\r\n            let t = 1 / 10 * i;\r\n            if (spiritBullet) {\r\n                this.scheduleOnce(() => {\r\n                    this.initSpiritBullet(spiritBullet, initPosArr[i], flyDir);\r\n                }, t);\r\n            }\r\n            else {\r\n                this.loadPrefab(\"spiritBullet\", (assets) => {\r\n                    plm.addPoolToPools(\"spiritBullet\", new NodePool(), assets);\r\n                    spiritBullet = plm.getFromPool(\"spiritBullet\");\r\n                    this.scheduleOnce(() => {\r\n                        this.initSpiritBullet(spiritBullet, initPosArr[i], flyDir);\r\n                    }, t);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    initSpiritBullet(spiritBullet, initPos, flyDir) {\r\n        let data = this.getWeaponDataByIdOrName(\"spiritBullet\");\r\n        spiritBullet.setPosition(0, 0, 0);\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        spiritBullet.parent = layer;\r\n        // let flyDir = this.getFlyDir(em.dispatch(\"getHeroControlProperty\", \"_curAimDir\"));\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        wp.x += initPos.x;\r\n        wp.y += initPos.y;\r\n        spiritBullet.setWorldPosition(wp);\r\n        spiritBullet.getComponent(\"SpiritBullet\").init(data, this._spiritBulletLv, flyDir);\r\n    }\r\n    getFlyDirByCurPos(target) {\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        // return glf.getTwoPointFlyDir(wp,target);\r\n        return glf.getTwoPointFlyDir(target, wp);\r\n    }\r\n    isOpenSpiritBulletUltimateSkill(bool: boolean) {\r\n        return;\r\n        if (bool) this.usingSpellUltimateSkill();\r\n    }\r\n    usingSpiritBulletUltimateSkill() {\r\n        console.log(\"usingSpiritBulletUltimateSkill 还没写\");\r\n    }\r\n\r\n    //=================剑相关===================\r\n    //是否 使用 剑\r\n    isUsingSword(bool: boolean) {\r\n        if (bool) {\r\n            let interval = this._rogueSkillCDList.sword;\r\n            this.schedule(this.createSword, interval);\r\n        } else {\r\n            this.unschedule(this.createSword);\r\n        }\r\n    }\r\n    // 创建剑\r\n    createSword() {\r\n        if (ggd.stopAll) return;\r\n        let data = this.getWeaponDataByIdOrName(\"sword\");\r\n        let total = data.total[this._swordLv - 1];\r\n        let bonusTotal = em.dispatch(\"getHeroControlProperty\", \"_bonusBulletTotal\");\r\n        total += bonusTotal;\r\n        if (!total) throw \"total err,total is \" + total;\r\n        let curDirection = em.dispatch(\"getHeroControlProperty\", \"_curDirection\");\r\n        if (curDirection.x == 0 && curDirection.y == 0) return;//人物未移动时  不创建子弹\r\n        let initPosArr = this.getFlySwordInitPos(total);\r\n        for (let i = 0; i < total; i++) {\r\n            let sword = plm.getFromPool(\"sword\");\r\n            if (sword) this.initSword(sword, initPosArr[i]);\r\n            else {\r\n                this.loadPrefab(\"sword\", (assets) => {\r\n                    plm.addPoolToPools(\"sword\", new NodePool(), assets);\r\n                    sword = plm.getFromPool(\"sword\");\r\n                    this.initSword(sword, initPosArr[i]);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    initSword(sword, initPos) {\r\n        let data = this.getWeaponDataByIdOrName(\"sword\");\r\n        sword.setPosition(0, 0, 0);\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        sword.parent = layer;\r\n        let flyDir = this.getFlyDir(em.dispatch(\"getHeroControlProperty\", \"_curDirection\"));\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        // console.log(\"initPos\", initPos);\r\n\r\n        wp.x += initPos.x;\r\n        wp.y += initPos.y;\r\n        sword.setWorldPosition(wp);\r\n        sword.getComponent(\"Sword\").init(data, this._swordLv, flyDir);\r\n    }\r\n    // 随机获取 剑 初始化位置\r\n    getFlySwordInitPos(total) {\r\n        let unit = 30;\r\n        let arr = [];\r\n\r\n        for (let i = 0; i < total; i++) {\r\n            let m = i / 3 | 0;\r\n            let n = i % 3;\r\n            let dir = {\r\n                x: n == 0 ? 0 : (n == 1 ? unit : -unit),\r\n                y: m * unit,\r\n            };\r\n            arr.push(dir);\r\n        }\r\n        // console.log(\"arr\",arr);\r\n        return arr;\r\n        // return [{ x: 0, y: 0 }, { x: unit, y: 0 }, { x: -unit, y: 0 }, { x: 0, y: unit }, { x: unit, y: unit }, { x: -unit, y: unit }].slice(0, total);\r\n    }\r\n    //剑 大招\r\n    usingSwordUltimateSkill() {\r\n        if (ggd.stopAll) return;\r\n        let total = 16;\r\n        let r = 50;\r\n        // let initPosArr = this.getCirclePos(r, total);\r\n        let initPosArr = glf.getCirclePos(r, total);\r\n        let data = this.getWeaponDataByIdOrName(\"sword\");\r\n        for (let i = 0; i < total; i++) {\r\n            let sword = plm.getFromPool(\"sword\");\r\n            sword.setPosition(0, 0, 0);\r\n            let layer = find(\"Canvas/bulletLayer\");\r\n            sword.parent = layer;\r\n            let initPos = initPosArr[i];\r\n            let dir = { x: initPos[0] / r, y: initPos[1] / r };\r\n            // 转换成可使用的方向\r\n            let flyDir = this.getFlyDir(dir);\r\n            let wp = em.dispatch(\"getHeroWorldPos\");\r\n            wp.x += initPos[0];\r\n            wp.y += initPos[1];\r\n            sword.setWorldPosition(wp);\r\n            sword.getComponent(\"Sword\").init(data, this._swordLv, flyDir);\r\n        }\r\n        // console.log(\"释放简答\");\r\n\r\n    }\r\n    //是否开启 剑 大招\r\n    isOpenSwordUltimateSkill(bool: boolean) {\r\n        if (bool) {\r\n            let t = this._rogueUltimateSkillCDList.sword;\r\n            this.schedule(this.usingSwordUltimateSkill, t);\r\n        } else {\r\n            this.unschedule(this.usingSwordUltimateSkill);\r\n        }\r\n    }\r\n    //=================飞剑相关====================\r\n    isUsingFlySword(bool: boolean) {\r\n        let data = this.getWeaponDataByIdOrName(\"flySword\");\r\n        let total = data.total[this._flySwordLv - 1];\r\n        // let bonusTotal = em.dispatch(\"getHeroControlProperty\", \"_bonusBulletTotal\");\r\n        // total += bonusTotal;\r\n        this.openFlySword(total);\r\n    }\r\n    // 开启飞剑\r\n    openFlySword(total) {\r\n        let par = find(\"Canvas/heroLayer/flySwordPar\");\r\n        for (let i = 0; i < total; i++) {\r\n            par.children[i].active = true;\r\n        }\r\n    }\r\n    usingFlySwordUltimateSkill() { }\r\n    isOpenFlySwordUltimateSkill(bool: boolean) { }\r\n    //=================飞镖相关===================\r\n    isUsingDarts(bool: boolean) {\r\n        if (bool) {\r\n            let interval = this._rogueSkillCDList.darts;\r\n            this.schedule(this.createDarts, interval);\r\n        } else {\r\n            this.unschedule(this.createDarts);\r\n        }\r\n    }\r\n    createDarts() {\r\n        if (ggd.stopAll) return;\r\n        let data = this.getWeaponDataByIdOrName(\"darts\");\r\n        let total = data.total[this._dartsLv - 1];\r\n        let bonusTotal = em.dispatch(\"getHeroControlProperty\", \"_bonusBulletTotal\");\r\n        total += bonusTotal;\r\n        if (!total) throw \"total err,total is \" + total;\r\n        // let curAimDir = this.getFlyDir(em.dispatch(\"getHeroControlProperty\", \"_curAimDir\"));\r\n        let curAimDir = this.getFlyDir(em.dispatch(\"getHeroControlProperty\", \"_curDirection\"));\r\n        let flyDirArr = this.getFlyDirArr(curAimDir, total);\r\n        for (let i = 0; i < total; i++) {\r\n            let darts = plm.getFromPool(\"darts\");\r\n            if (darts) this.initDarts(darts, flyDirArr[i], i);\r\n            else {\r\n                this.loadPrefab(\"darts\", (assets) => {\r\n                    plm.addPoolToPools(\"darts\", new NodePool(), assets);\r\n                    darts = plm.getFromPool(\"darts\");\r\n                    darts = instantiate(assets);\r\n                    this.initDarts(darts, flyDirArr[i], i);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    initDarts(darts, flyDir, i) {\r\n        let data = this.getWeaponDataByIdOrName(\"darts\");\r\n        let unit = 50;\r\n        darts.setPosition(0, 0, 0);\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        darts.parent = layer;\r\n        let initPos = new Vec2(flyDir.x * unit * (Math.floor(i / 4) + 1), flyDir.y * unit * (Math.floor(i / 4) + 1));\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        wp.x += initPos.x;\r\n        wp.y += initPos.y;\r\n        darts.setWorldPosition(wp);\r\n        if (this._dartsLv == data.maxLevel) darts.getComponent(\"Darts\").init(data, this._dartsLv, flyDir, true);\r\n        else darts.getComponent(\"Darts\").init(data, this._dartsLv, flyDir);\r\n    }\r\n    isOpenDartsUltimateSkill(bool: boolean) {\r\n        console.log(\"飞镖可分裂\");\r\n    }\r\n    // =================冰魄神针=======================\r\n    //是否 使用 冰魄神针\r\n    isUsingIceSpiritNeedle(bool: boolean) {\r\n        if (bool) {\r\n            let interval = this._rogueSkillCDList.iceSpiritNeedle;\r\n            this.schedule(this.createIceSpiritNeedle, interval);\r\n        } else {\r\n            this.unschedule(this.createIceSpiritNeedle);\r\n        }\r\n    }\r\n    // 创建 冰魄神针\r\n    createIceSpiritNeedle() {\r\n        if (ggd.stopAll) return;\r\n        let data = this.getWeaponDataByIdOrName(\"iceSpiritNeedle\");\r\n        let total = data.total[this._iceSpiritNeedleLv - 1];\r\n\r\n        let bonusTotal = em.dispatch(\"getHeroControlProperty\", \"_bonusBulletTotal\");\r\n        total += bonusTotal;\r\n        if (!total) throw \"total err,total is \" + total;\r\n        let flyDirs = em.dispatch(\"usingHeroControlFun\", \"seekTreeRandomNEnemyDir\", total);\r\n        if (!flyDirs) return;\r\n        for (let i = 0; i < total; i++) {\r\n            let iceSpiritNeedle = plm.getFromPool(\"iceSpiritNeedle\");\r\n            let flyDir = flyDirs[i];\r\n            let t = 0.2 * i;\r\n            if (iceSpiritNeedle) {\r\n                this.scheduleOnce(() => {\r\n                    this.initIceSpiritNeedle(iceSpiritNeedle, flyDir);\r\n                }, t);\r\n            }\r\n            else {\r\n                this.loadPrefab(\"iceSpiritNeedle\", (assets) => {\r\n                    plm.addPoolToPools(\"iceSpiritNeedle\", new NodePool(), assets);\r\n                    iceSpiritNeedle = plm.getFromPool(\"iceSpiritNeedle\", true);\r\n                    this.scheduleOnce(() => {\r\n                        this.initIceSpiritNeedle(iceSpiritNeedle, flyDir);\r\n                    }, t);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    initIceSpiritNeedle(iceSpiritNeedle, flyDir) {\r\n        let data = this.getWeaponDataByIdOrName(\"iceSpiritNeedle\");\r\n        iceSpiritNeedle.setPosition(0, 0, 0);\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        iceSpiritNeedle.parent = layer;\r\n        // let wp = em.dispatch(\"usingHeroControlFun\", \"getRandomPosNearbyHero\", 150, 200);\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        iceSpiritNeedle.setWorldPosition(wp);\r\n        // let flyDir =em.dispatch(\"usingHeroControlFun\", \"seekTreeFirstEnemyDir\");\r\n        // iceSpiritNeedle.getComponent(\"IceSpiritNeedle\").init(data, this._iceSpiritNeedleLv,this.getRandomFlyDir());\r\n        iceSpiritNeedle.getComponent(\"IceSpiritNeedle\").init(data, this._iceSpiritNeedleLv, flyDir);\r\n    }\r\n    // 获取随机飞行方向\r\n    getRandomFlyDir() {\r\n        let x = Math.random();\r\n        let y = Math.random();\r\n        // 方向归一\r\n        if (x > y) {\r\n            y = x / y;\r\n            x = 1;\r\n        } else {\r\n            x = y / x;\r\n            y = 1;\r\n        }\r\n        //随机正负\r\n        x = Math.random() > 0.5 ? x : -x;\r\n        y = Math.random() > 0.5 ? y : -y;\r\n        return { x: x, y: y };\r\n    }\r\n    isOpenIceSpiritNeedleUltimateSkill(bool: boolean) {\r\n        console.log(\"冰魄神针大招 还没写\");\r\n    }\r\n    // =================天雷=======================\r\n    //是否 使用 天雷\r\n    isUsingSkyThunder(bool: boolean) {\r\n        if (bool) {\r\n            let interval = this._rogueSkillCDList.skyThunder;\r\n            this.schedule(this.createSkyThunder, interval);\r\n        } else {\r\n            this.unschedule(this.createSkyThunder);\r\n        }\r\n    }\r\n    // 创建 天雷\r\n    createSkyThunder() {\r\n        if (ggd.stopAll) return;\r\n        let data = this.getWeaponDataByIdOrName(\"skyThunder\");\r\n        let total = data.total[this._skyThunderLv - 1];\r\n        let bonusTotal = em.dispatch(\"getHeroControlProperty\", \"_bonusBulletTotal\");\r\n        total += bonusTotal;\r\n        if (!total) throw \"total err,total is \" + total;\r\n        for (let i = 0; i < total; i++) {\r\n            let t = 0.2 * i;\r\n            this.scheduleOnce(() => {\r\n                if (ggd.stopAll) return;\r\n                let wp = em.dispatch(\"usingHeroControlFun\", \"seekTreeRandomOneEnemyPos\");\r\n                if (!wp) return;\r\n                let skyThunder = plm.getFromPool(\"skyThunder\");\r\n                if (skyThunder) {\r\n                    this.initSkyThunder(skyThunder, wp);\r\n                }\r\n                else {\r\n                    this.loadPrefab(\"skyThunder\", (assets) => {\r\n                        plm.addPoolToPools(\"skyThunder\", new NodePool(), assets);\r\n                        // skyThunder = plm.getFromPool(\"skyThunder\");\r\n                        skyThunder = plm.getFromPool(\"skyThunder\");\r\n                        this.initSkyThunder(skyThunder, wp);\r\n                    });\r\n                }\r\n            }, t);\r\n        }\r\n    }\r\n    initSkyThunder(skyThunder, wp) {\r\n        let data = this.getWeaponDataByIdOrName(\"skyThunder\");\r\n        // skyThunder.setPosition(0, 0, 0);\r\n        skyThunder.parent = find(\"Canvas/bulletLayer\");\r\n        skyThunder.setWorldPosition(wp.x, wp.y, 0);\r\n        skyThunder.getComponent(\"SkyThunder\").init(data, this._skyThunderLv);\r\n\r\n    }\r\n    isOpenSkyThunderUltimateSkill(bool: boolean) {\r\n        console.log(\"天雷大招 还没写\");\r\n    }\r\n    //=================地火相关===================\r\n    //是否 使用 地火\r\n    isUsingLandFire(bool: boolean) {\r\n        if (bool) {\r\n            let interval = this._rogueSkillCDList.landFire;\r\n            this.schedule(this.createLandFire, interval);\r\n        } else {\r\n            this.unschedule(this.createLandFire);\r\n        }\r\n    }\r\n    // 创建 地火\r\n    createLandFire() {\r\n        if (ggd.stopAll) return;\r\n        let data = this.getWeaponDataByIdOrName(\"landFire\");\r\n        let total = data.total[this._landFireLv - 1];\r\n        let bonusTotal = em.dispatch(\"getHeroControlProperty\", \"_bonusBulletTotal\");\r\n        total += bonusTotal;\r\n        if (!total) throw \"total err,total is \" + total;\r\n\r\n        let dirs = [\r\n            { x: -1, y: 0 }, { x: 1, y: 0 }, { x: 0, y: 1 }, { x: 0, y: -1 },\r\n            { x: -1, y: 1 }, { x: 1, y: -1 }, { x: 1, y: 1 }, { x: -1, y: -1 }\r\n        ];\r\n        for (let i = 0; i < total; i++) {\r\n            this.scheduleOnce(() => {\r\n                if (ggd.stopAll) return;\r\n                let landFire = plm.getFromPool(\"landFire\");\r\n                if (landFire) this.initLandFire(landFire, dirs[i % dirs.length]);\r\n                else {\r\n                    this.loadPrefab(\"landFire\", (assets) => {\r\n                        plm.addPoolToPools(\"landFire\", new NodePool(), assets);\r\n                        landFire = plm.getFromPool(\"landFire\");\r\n                        this.initLandFire(landFire, dirs[i % 4]);\r\n                    });\r\n                };\r\n            }, i * 0.2);\r\n        };\r\n    }\r\n    initLandFire(landFire, dir) {\r\n        let data = this.getWeaponDataByIdOrName(\"landFire\");\r\n        landFire.setPosition(0, 0, 0);\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        landFire.parent = layer;\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        landFire.setWorldPosition(wp);\r\n        landFire.getComponent(\"LandFire\").init(data, this._landFireLv, dir);\r\n    }\r\n    isOpenLandFireUltimateSkill(bool: boolean) {\r\n        console.log(\"地火大招 还没写\");\r\n    }\r\n    //=================太极环相关===================\r\n    //是否 使用 太极环\r\n    isUsingTaijihuan(bool: boolean) {\r\n        if (bool) {\r\n            let interval = this._rogueSkillCDList.taijihuan;\r\n            this.schedule(this.createTaijihuan, interval);\r\n        } else {\r\n            this.unschedule(this.createTaijihuan);\r\n        }\r\n    }\r\n    // 创建 太极环\r\n    createTaijihuan() {\r\n        if (ggd.stopAll) return;\r\n        let data = this.getWeaponDataByIdOrName(\"taijihuan\");\r\n        let total = data.total[this._taijihuanLv - 1];\r\n        let bonusTotal = em.dispatch(\"getHeroControlProperty\", \"_bonusBulletTotal\");\r\n        total += bonusTotal;\r\n        if (!total) throw \"total err,total is \" + total;\r\n        for (let i = 0; i < total; i++) {\r\n            this.scheduleOnce(() => {\r\n                if (ggd.stopAll) return;\r\n                let taijihuan = plm.getFromPool(\"taijihuan\");\r\n                if (taijihuan) this.initTaijihuan(taijihuan);\r\n                else {\r\n                    this.loadPrefab(\"taijihuan\", (assets) => {\r\n                        plm.addPoolToPools(\"taijihuan\", new NodePool(), assets);\r\n                        taijihuan = plm.getFromPool(\"taijihuan\");\r\n                        this.initTaijihuan(taijihuan);\r\n                    });\r\n                }\r\n            }, i * 0.2);\r\n\r\n        }\r\n    }\r\n    initTaijihuan(taijihuan) {\r\n        let data = this.getWeaponDataByIdOrName(\"taijihuan\");\r\n        taijihuan.setPosition(0, 0, 0);\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        taijihuan.parent = layer;\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        taijihuan.setWorldPosition(wp);\r\n        taijihuan.getComponent(\"Taijihuan\").init(data, this._taijihuanLv);\r\n    }\r\n    isOpenTaijihuanUltimateSkill(bool: boolean) {\r\n        console.log(\"太极环大招 还没写\");\r\n    }\r\n    // ======================通用======================\r\n\r\n    //深拷贝一个飞行方向\r\n    getFlyDir(dir) {\r\n        return new Vec2(dir.x, dir.y);\r\n    }\r\n    getFlyDirArr(dir, total) {\r\n        let arr = [];\r\n        for (let i = 0; i < total; i++) {\r\n            arr.push(this.getRotationDir(dir, 90 * i));\r\n        }\r\n        return arr;\r\n    }\r\n    // 获取旋转后的方向\r\n    getRotationDir(dir, angle) {\r\n        //角度转弧度\r\n        let radian = angle * Math.PI / 180;\r\n        //向量旋转指定弧度的角度\r\n        let x = dir.x;\r\n        let y = dir.y;\r\n        let x2 = x * Math.cos(radian) - y * Math.sin(radian);\r\n        let y2 = x * Math.sin(radian) + y * Math.cos(radian);\r\n        return new Vec2(x2, y2);\r\n        // return { x: x2, y: y2 };\r\n    }\r\n\r\n\r\n\r\n\r\n    //===================外部调用===================\r\n    /**\r\n     * @description: 获得升级奖励\r\n     * @param {*} e\r\n     * @param {string} type 奖励类型\r\n     * 奖励分为多种，武器类奖励满级后 从奖励选项中删除\r\n     */\r\n    getUpgradeReward(e, type: string) {\r\n        find(\"GameUILayer/selectWeapon\", this.node.parent).active = false;\r\n        for (const node of this.btnNodes) {\r\n            node.getChildByName(\"mask\").getChildByName(\"icon\").getComponent(Sprite).spriteFrame = null;\r\n            // node.getComponent(Sprite).spriteFrame = null;\r\n        }\r\n        ggd.stopAll = find(\"GameUILayer/passRewardLayer\", this.node.parent).active;\r\n        switch (type) {\r\n            case \"restoreHP\":\r\n                this.restoreHP();\r\n                break;\r\n            case \"addMoveSpeed\":\r\n                em.dispatch(\"usingHeroControlFun\", \"updateBonusMoveSpeed\", 20);\r\n                break;\r\n            case \"addCriticalHitRate\":\r\n                em.dispatch(\"usingHeroControlFun\", \"updateBonusCriticalHitRate\", 5);\r\n                break;\r\n\r\n            default:\r\n                if (this.isHasWeaponByName(type)) {\r\n                    this.upgradeWeaponByWeaponName(type);\r\n                    break;\r\n                } else throw \"type error,type is \" + type;\r\n        }\r\n        em.dispatch(\"usingHeroControlFun\", \"resumeGame\");\r\n        for (const node of this.btnNodes) {\r\n            node.getComponent(Animation).stop();\r\n            node.setScale(0, 0, 1);\r\n        }\r\n    }\r\n    getAllUpgradeRewardComplete() {\r\n        find(\"GameUILayer/selectWeapon\", this.node.parent).active = false;\r\n        for (const node of this.btnNodes) {\r\n            node.getChildByName(\"mask\").getChildByName(\"icon\").getComponent(Sprite).spriteFrame = null;\r\n            // node.getComponent(Sprite).spriteFrame = null;\r\n        }\r\n        ggd.stopAll = find(\"GameUILayer/passRewardLayer\", this.node.parent).active;\r\n        for (const type of this._curAllURList) {\r\n            switch (type) {\r\n                case \"restoreHP\":\r\n                    this.restoreHP();\r\n                    break;\r\n                case \"addMoveSpeed\":\r\n                    em.dispatch(\"usingHeroControlFun\", \"updateBonusMoveSpeed\", 30);\r\n                    break;\r\n                case \"addCriticalHitRate\":\r\n                    em.dispatch(\"usingHeroControlFun\", \"updateBonusCriticalHitRate\", 5);\r\n                    break;\r\n                default:\r\n                    if (this.isHasWeaponByName(type)) {\r\n                        this.upgradeWeaponByWeaponName(type);\r\n                        break;\r\n                    } else throw \"type error,type is \" + type;\r\n            }\r\n        }\r\n        em.dispatch(\"usingHeroControlFun\", \"resumeGame\");\r\n        for (const node of this.btnNodes) {\r\n            node.getComponent(Animation).stop();\r\n            node.setScale(0, 0, 1);\r\n        }\r\n    }\r\n    // 刷新升级奖励\r\n    updateUpgradeRewardComplete() {\r\n        for (const node of this.btnNodes) {\r\n            node.getComponent(Animation).stop();\r\n            node.setScale(0, 0, 1);\r\n        };\r\n        this.updateSelectWeapon();\r\n    }\r\n    //播放选择武器 进场动画\r\n    playBtnNodeAnim() {\r\n        let interval = 0.4;\r\n        this.btnNodes.forEach((node, index) => {\r\n            this.scheduleOnce(() => {\r\n                node.getComponent(Animation).play();\r\n            }, interval * index);\r\n        });\r\n    }\r\n    //打开并刷新选择武器界面\r\n    updateSelectWeapon() {\r\n        this.playBtnNodeAnim();\r\n        let total = this.btnNodes.length;\r\n        let count = 0;\r\n        let randomArr = [];\r\n        if (this._rewardConfig.length < total) throw \"this._rewardConfig.length is err,this._rewardConfig is \" + this._rewardConfig;\r\n        while (total != count) {\r\n            let name = this._rewardConfig[Math.random() * this._rewardConfig.length | 0];\r\n            if (randomArr.indexOf(name) < 0) {\r\n                // console.log(\" //添加等级判断 越级则不添加 目前 还没写 后期添加\");\r\n                randomArr.push(name);\r\n                count++;\r\n            }\r\n        }\r\n        this._curAllURList = randomArr;\r\n        let noStarArr = [\"restoreHP\", \"addMoveSpeed\", \"addCriticalHitRate\"];\r\n        // console.log(\"randomArr\", randomArr);\r\n        for (let i = 0; i < this.btnNodes.length; i++) {\r\n            let node = this.btnNodes[i];\r\n            let name = randomArr[i];\r\n            let sprite = node.getChildByName(\"mask\").getChildByName(\"icon\").getComponent(Sprite);\r\n            // em.dispatch(\"loadTheDirResources\", \"images/weapons/\" + name + \"/spriteFrame\", (assets) => sprite.spriteFrame = assets);\r\n            em.dispatch(\"loadTheDirResources\", \"images/weapons/icon_\" + name + \"/spriteFrame\", (assets) => sprite.spriteFrame = assets);\r\n            //添加回调函数寻址方式\r\n            glf.createButton(this.node, node, \"WeaponManager\", \"getUpgradeReward\", name);\r\n            // 初始化描述\r\n            let mainNode = node;\r\n            let label = mainNode.getChildByName(\"label\").getComponent(Label);\r\n            let label2 = mainNode.getChildByName(\"name\").getComponent(Label);\r\n            this.updateUpgradeWeaponDescription(label, label2, name);\r\n            // 处理星星\r\n            let starPar = mainNode.getChildByName(\"starPar\");\r\n            if (noStarArr.indexOf(name) > -1) {//隐藏星星\r\n                starPar.active = false;\r\n            } else {\r\n                starPar.active = true;\r\n                let data = this.getWeaponDataByIdOrName(name);\r\n                let lv = this[\"_\" + data.name + \"Lv\"] + 1;\r\n                for (let i = 1; i < 6; i++) {\r\n                    let starPurple = starPar.getChildByName(\"star\" + i).getChildByName(\"starPurple\");\r\n                    if (i <= lv) starPurple.active = true;\r\n                    else starPurple.active = false;\r\n                }\r\n                // console.log(\"name\", name);\r\n                // console.log(\"lv\", lv);\r\n\r\n                // let playStar = starPar.getChildByName(\"star\" + (lv + 1)).getChildByName(\"starPurple\");\r\n                let playStar = starPar.getChildByName(\"star\" + lv).getChildByName(\"starPurple\");\r\n                this.playStarWink(playStar, mainNode.parent);\r\n            }\r\n        }\r\n        //开启自动化脚本后自动选择\r\n        // console.log(\"open auto script\", em.dispatch(\"getHeroControlProperty\", \"_openAutoScript\"));\r\n\r\n        if (em.dispatch(\"getHeroControlProperty\", \"_openAutoScript\")) {\r\n            let name = randomArr[Math.random() * randomArr.length | 0];\r\n            console.log(\"getUpgradeReward name\", name);\r\n            this.getUpgradeReward(null, name);\r\n        }\r\n    }\r\n    // 播放星星闪烁动画\r\n    playStarWink(node, mainNode) {\r\n        node.active = true;\r\n        let fun = () => {\r\n            node.active = !node.active;\r\n            if (mainNode.active == false) {\r\n                this.unschedule(fun);\r\n            }\r\n        };\r\n        this.schedule(fun, 0.3);\r\n    }\r\n    /**\r\n     * @description: 刷新升级武器描述\r\n     * @param {Label} label 需要刷新的label组件 \r\n     * @param {string} wName 武器名称\r\n     */\r\n    updateUpgradeWeaponDescription(label: Label, label2, wName: string) {\r\n        switch (wName) {\r\n            case \"restoreHP\":\r\n                label.string = \"血量拉满\";\r\n                label2.string = \"血量拉满\";\r\n                break;\r\n            case \"addMoveSpeed\":\r\n                label.string = \"增加20移速\";\r\n                label2.string = \"移速⬆\";\r\n                break;\r\n            case \"addCriticalHitRate\":\r\n                label.string = \"增加5%暴击率\";\r\n                label2.string = \"暴击率⬆\";\r\n                break;\r\n            default:\r\n                if (this.isHasWeaponByName(wName)) {\r\n                    let data = this.getWeaponDataByIdOrName(wName);\r\n                    let lv = this[\"_\" + data.name + \"Lv\"] + 1;//此时lv还没有++；\r\n                    label.string = data[\"lv\" + lv];\r\n                    label2.string = data.name2;\r\n                    break;\r\n                } else throw \"type error,type is \" + wName;\r\n        }\r\n    }\r\n    upgradeWeaponByWeaponName(wn: string) {\r\n        let data = this.getWeaponDataByIdOrName(wn);\r\n        if (!data) throw \"data is error,current data is \" + data;\r\n        if (this[\"_\" + wn + \"Lv\"] == data.maxLevel) return;\r\n        this[\"_\" + wn + \"Lv\"]++;\r\n        let wn2 = this.getNewStringFirstLetterToUpperCase(wn);\r\n        this[\"isUsing\" + wn2](true);\r\n        if (this[\"_\" + wn + \"Lv\"] == data.maxLevel) {\r\n            this.deleteFillLevelWeaponFromRewardConfig(wn);//删除满级技能\r\n            let string = \"isOpen\" + wn2 + \"UltimateSkill\";\r\n            console.log(\"string\", string);\r\n            this[string](true);\r\n        }\r\n        // console.log(\"wn\",wn);\r\n        // console.log(\"wn2\",wn2);\r\n    }\r\n    // 首字母大写\r\n    getNewStringFirstLetterToUpperCase(str: string) {\r\n        return str[0].toUpperCase() + str.substring(1);\r\n    }\r\n    // 将满级武器从奖励配置中删除\r\n    deleteFillLevelWeaponFromRewardConfig(wn: string) {\r\n        let index = this._rewardConfig.indexOf(wn);\r\n        if (index > -1) this._rewardConfig.splice(index, 1);\r\n        else throw \"weapon name is error,wn is \" + wn;\r\n    }\r\n    //回血\r\n    restoreHP() {\r\n        em.dispatch(\"usingHeroControlFun\", \"updateBloodProgress\", 999999);\r\n    }\r\n    //获取武器信息描述\r\n    getWeaponDes() {\r\n        // let string = \"===========武器等级===========\\n\";\r\n        let string = \"武器等级：\\n\";\r\n        let swordLv = this._swordLv > 0 ? \"飞剑术等级：\" + this._swordLv + \"\\n\" : \"\";\r\n        let guardLv = this._guardLv > 0 ? \"波动阵等级：\" + this._guardLv + \"\\n\" : \"\";\r\n        let spellLv = this._spellLv > 0 ? \"旋转护符等级：\" + this._spellLv + \"\\n\" : \"\";\r\n        let dartsLv = this._dartsLv > 0 ? \"六角镖等级：\" + this._dartsLv + \"\\n\" : \"\";\r\n        let spiritBulletLv = this._spiritBulletLv > 0 ? \"手里剑等级：\" + this._spiritBulletLv + \"\\n\" : \"\";\r\n        let skyThunderLv = this._skyThunderLv > 0 ? \"天雷等级：\" + this._skyThunderLv + \"\\n\" : \"\";\r\n        let flySwordLv = this._flySwordLv > 0 ? \"五行珠等级：\" + this._flySwordLv + \"\\n\" : \"\";\r\n        return string + swordLv + guardLv + spellLv + dartsLv + spiritBulletLv + flySwordLv + skyThunderLv;\r\n    }\r\n\r\n\r\n    /**\r\n     * @description: 通过id 或 name 获取武器属性\r\n     * @param {*} id_name 武器 id 或 name\r\n     */\r\n    getWeaponDataByIdOrName(id_name) {\r\n        if (this._weaponData.hasOwnProperty(id_name)) return this._weaponData[id_name];\r\n        else throw id_name + \" of _weaponData is null\";\r\n    }\r\n    //通过名称判断是否拥有武器\r\n    isHasWeaponByName(name) {\r\n        return this._weaponData.hasOwnProperty(name);\r\n    }\r\n\r\n    // 外部调用WeaponManager通用方法\r\n    usingWeaponManagerFun(string, ...param) {\r\n        if (this[string] && typeof this[string] == \"function\") return this[string](...param);\r\n        else throw string + \" is not fun or undefined\";\r\n    }\r\n    //获取hero control 属性\r\n    getWeaponManagerProperty(string: string) {\r\n        if (this.hasOwnProperty(string)) return this[string];\r\n        else throw \"hero control 中不存在属性：\" + string;\r\n    }\r\n    //=================技能==========================\r\n    // =============一阶功法==================\r\n    /**\r\n     * @description: 剑雨术\r\n     * 生成一阵持续5s的剑雨，对敌人产生多段伤害，每段伤害基础伤害为22。\r\n     */\r\n    usingSkillSwordRain() {\r\n        if (ggd.stopAll) return;\r\n        let total = 5;\r\n        let spx = -160;\r\n        let unitX = 80;\r\n        let times = 5;\r\n        let interval = 0.2;\r\n        this.schedule(() => {\r\n            for (let i = 0; i < total; i++) {\r\n                let swordRain = plm.getFromPool(\"swordRain\");\r\n                if (swordRain) {\r\n                    this.initSwordRain(swordRain, (spx + i * unitX));\r\n                } else {\r\n                    this.loadPrefab(\"swordRain\", (assets) => {\r\n                        plm.addPoolToPools(\"swordRain\", new NodePool(), assets);\r\n                        swordRain = plm.getFromPool(\"swordRain\");\r\n                        this.initSwordRain(swordRain, (spx + i * unitX));\r\n                    });\r\n                }\r\n            }\r\n        }, interval, times, 0);\r\n    }\r\n    initSwordRain(swordRain, xOffset) {\r\n        let skillData = em.dispatch(\"usingHeroBasePropertyFun\", \"getSkillBookDataByIdOrName\", \"剑雨术\");\r\n        let data = {\r\n            name: skillData.name2,\r\n            duration: skillData.duration,\r\n            damage: skillData.baseDamage\r\n        };\r\n        swordRain.setPosition(0, 0, 0);\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        swordRain.parent = layer;\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        wp.x += xOffset;\r\n        wp.y += 500;\r\n        swordRain.setWorldPosition(wp);\r\n        swordRain.getComponent(\"SwordRain\").init(data);\r\n    }\r\n    // \r\n    /**\r\n     * @description: 一剑隔世\r\n     * 在一段时间聚气后对周边单位产生999的基础伤害，附加1.2倍的伤害加成。\r\n     */\r\n    usingSkillJustOneSwordDivideWorld() {\r\n        let prefab = plm.getFromPool(\"justOneSwordDivideWorld\");\r\n        if (prefab) this.initJustOneSwordDivideWorld(prefab);\r\n        else {\r\n            this.loadPrefab(\"justOneSwordDivideWorld\", (assets) => {\r\n                plm.addPoolToPools(\"justOneSwordDivideWorld\", new NodePool(), assets);\r\n                let prefab = plm.getFromPool(\"justOneSwordDivideWorld\");\r\n                this.initJustOneSwordDivideWorld(prefab);\r\n            });\r\n        }\r\n\r\n    }\r\n    initJustOneSwordDivideWorld(prefab) {\r\n        // let layer = find(\"Canvas/bulletLayer\");\r\n        let layer = find(\"Canvas/heroLayer/skillParent\");\r\n        prefab.parent = layer;\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        prefab.setWorldPosition(wp);\r\n        prefab.getComponent(\"JustOneSwordDivideWorld\").init();\r\n        let changeAngle = 0;\r\n        let unitChange = 20;\r\n        let callback = () => {\r\n            if (ggd.stopAll) return;\r\n            prefab.angle += unitChange;\r\n            changeAngle += unitChange;\r\n            if (changeAngle >= 1080) {\r\n                this.unschedule(callback);\r\n                prefab.getComponent(\"JustOneSwordDivideWorld\").recoveryToPool();\r\n            }\r\n        }\r\n        this.scheduleOnce(() => {\r\n            prefab.getChildByName(\"collectPower\").active = false;;\r\n            this.schedule(callback, 1 / 60);\r\n        }, 1.5);\r\n    }\r\n    /**\r\n     * @description: 万剑归冢\r\n     * 15s内从远方唤来30把巨剑，每把可造成666的基础伤害，附加2倍伤害加成\r\n     */\r\n    usingSkillThousandsSwordToTomb() {\r\n        let total = 30;\r\n        for (let i = 0; i < total; i++) {\r\n            let prefab = plm.getFromPool(\"thousandsSwordToTomb\");\r\n            if (prefab) {\r\n                this._thousandsSwordToTombQueue.enqueue(prefab);\r\n                if (i === 0) this.schedule(this.createThousandsSwordToTomb, 0.3);//第一次有prefab 说明 已经预加载成功 直接调用即可。\r\n            }\r\n            else {\r\n                this.loadPrefab(\"thousandsSwordToTomb\", (assets) => {\r\n                    plm.addPoolToPools(\"thousandsSwordToTomb\", new NodePool(), assets);\r\n                    let prefab = plm.getFromPool(\"thousandsSwordToTomb\");\r\n                    this._thousandsSwordToTombQueue.enqueue(prefab);//第一次没有prefab 则回调成功后在调用\r\n                });\r\n            }\r\n        }\r\n\r\n    }\r\n    //创建万剑\r\n    createThousandsSwordToTomb() {\r\n        if (ggd.stopAll) return;\r\n        // console.log(\"创建万剑\");\r\n        let prefab = this._thousandsSwordToTombQueue.dequeue();\r\n        if (prefab) this.initThousandsSwordToTomb(prefab);\r\n        else this.unschedule(this.createThousandsSwordToTomb);\r\n    }\r\n    initThousandsSwordToTomb(prefab) {\r\n        let skillData = em.dispatch(\"usingHeroBasePropertyFun\", \"getSkillBookDataByIdOrName\", \"万剑归冢\");\r\n        let data = {\r\n            damage: skillData.baseDamage,\r\n            duration: skillData.duration,\r\n            moveDistance: 1000,\r\n            name: skillData.name2,\r\n        }\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        prefab.parent = layer;\r\n        prefab.getComponent(\"ThousandsSwordToTomb\").init(data);\r\n    }\r\n    /**\r\n     * @description: 冰锥术\r\n     * 向周围发射冰锥，每个冰锥造成500伤害，附加1.5伤害加成，并冻结对方。\r\n     */\r\n    usingSkillIceCone() {\r\n        let total = 20;\r\n        let r = 20;\r\n        let initPosArr = glf.getCirclePos(r, total);\r\n        for (let i = 0; i < total; i++) {\r\n            let prefab = plm.getFromPool(\"iceCone\");\r\n            let initPos = initPosArr[i];\r\n            let dir = { x: initPos[0] / r, y: initPos[1] / r };\r\n            if (prefab) {\r\n                this.initIceCone(prefab, dir, initPos);\r\n            } else {\r\n                this.loadPrefab(\"iceCone\", (assets) => {\r\n                    plm.addPoolToPools(\"iceCone\", new NodePool(), assets);\r\n                    let prefab = plm.getFromPool(\"iceCone\");\r\n                    this.initIceCone(prefab, dir, initPos);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    initIceCone(prefab, dir, pos) {\r\n        let skillData = em.dispatch(\"usingHeroBasePropertyFun\", \"getSkillBookDataByIdOrName\", \"冰锥术\");\r\n        let data = {\r\n            \"damage\": skillData.baseDamage,\r\n            \"duration\": skillData.duration,\r\n            \"moveSpeed\": 600,\r\n            \"canAttackTimes\": 1,\r\n            \"name\": skillData.name2,\r\n        }\r\n\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        prefab.parent = layer;\r\n        prefab.setWorldPosition(wp.x + pos[0], wp.y + pos[1], wp.z);\r\n\r\n        prefab.getComponent(\"IceCone\").init(data, dir);\r\n\r\n    }\r\n    //使用炎爆术\r\n    usingSkillFireBloom() {\r\n        let total = 60;\r\n        for (let i = 0; i < total; i++) {\r\n            let prefab = plm.getFromPool(\"fireBloom\");\r\n            if (prefab) {\r\n                this._fireBloomQueue.enqueue(prefab);\r\n                if (i === 0) this.schedule(this.createFireBloom, 0.2);//第一次有prefab 说明 已经预加载成功 直接调用即可。\r\n            }\r\n            else {\r\n                this.loadPrefab(\"fireBloom\", (assets) => {\r\n                    plm.addPoolToPools(\"fireBloom\", new NodePool(), assets);\r\n                    let prefab = plm.getFromPool(\"fireBloom\");\r\n                    this._fireBloomQueue.enqueue(prefab);//第一次没有prefab 则回调成功后在调用\r\n                });\r\n            }\r\n        }\r\n    }\r\n    // 创建炎爆\r\n    createFireBloom() {\r\n        if (ggd.stopAll) return;\r\n        // console.log(\"创建炎爆\");\r\n        let prefab = this._fireBloomQueue.dequeue();\r\n        if (prefab) {\r\n            let wp = em.dispatch(\"usingHeroControlFun\", \"getRandomPosNearHero\");\r\n            let layer = find(\"Canvas/bulletLayer\");\r\n            prefab.parent = layer;\r\n            prefab.setWorldPosition(wp.x, wp.y, 0);\r\n            prefab.getComponent(\"FireBloom\").init();\r\n        }\r\n        else this.unschedule(this.createFireBloom);\r\n    }\r\n    // 使用地狱火\r\n    usingSkillHellFire() {\r\n        let total = 20;\r\n        for (let i = 0; i < total; i++) {\r\n            let prefab = plm.getFromPool(\"hellFire\");\r\n            if (prefab) {\r\n                this._hellFireQueue.enqueue(prefab);\r\n                if (i === 0) this.schedule(this.createHellFire, 1);//第一次有prefab 说明 已经预加载成功 直接调用即可。\r\n            }\r\n            else {\r\n                this.loadPrefab(\"hellFire\", (assets) => {\r\n                    plm.addPoolToPools(\"hellFire\", new NodePool(), assets);\r\n                    let prefab = plm.getFromPool(\"hellFire\");\r\n                    this._hellFireQueue.enqueue(prefab);//第一次没有prefab 则回调成功后在调用\r\n                });\r\n            }\r\n        }\r\n    }\r\n    createHellFire() {\r\n        if (ggd.stopAll) return;\r\n        // console.log(\"创建炎爆\");\r\n        let prefab = this._hellFireQueue.dequeue();\r\n        if (prefab) {\r\n            // let wp = em.dispatch(\"usingHeroControlFun\",\"getRandomPosNearHero\");\r\n            let wp = em.dispatch(\"getHeroWorldPos\");\r\n            let layer = find(\"Canvas/bulletLayer\");\r\n            prefab.parent = layer;\r\n            prefab.setWorldPosition(wp.x, wp.y + 50, 0);\r\n            prefab.getComponent(\"HellFire\").init();\r\n        }\r\n        else this.unschedule(this.createHellFire);\r\n    }\r\n    //使用火行步\r\n    usingSkillMoveLikeFire() {\r\n        this.schedule(this.createMoveLikeFire, 0.2);\r\n        // this.schedule(this.createMoveLikeFire, 0.5);\r\n    }\r\n    createMoveLikeFire() {\r\n        if (ggd.stopAll) return;\r\n        let prefab = plm.getFromPool(\"moveLikeFire\");\r\n        if (prefab) {\r\n            let wp = em.dispatch(\"getHeroWorldPos\");\r\n            let layer = find(\"Canvas/bulletLayer\");\r\n            prefab.parent = layer;\r\n            prefab.setWorldPosition(wp.x, wp.y, 0);\r\n            prefab.getComponent(\"MoveLikeFire\").init();\r\n        } else {\r\n            this.loadPrefab(\"moveLikeFire\", (assets) => {\r\n                plm.addPoolToPools(\"moveLikeFire\", new NodePool(), assets);\r\n                let prefab = plm.getFromPool(\"moveLikeFire\");\r\n                let wp = em.dispatch(\"getHeroWorldPos\");\r\n                let layer = find(\"Canvas/bulletLayer\");\r\n                prefab.parent = layer;\r\n                prefab.setWorldPosition(wp.x, wp.y, 0);\r\n                prefab.getComponent(\"MoveLikeFire\").init();\r\n            });\r\n        }\r\n    }\r\n    // 使用八面危风\r\n    usingSkillDangerWindToNear() {\r\n        let dirArr = [[-1, 1], [0, 1], [1, 1], [-1, 0], [1, 0], [-1, -1], [0, -1], [1, -1]];\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        for (const dir of dirArr) {\r\n            let prefab = plm.getFromPool(\"dangerWindToNear\");\r\n            if (prefab) {\r\n                prefab.parent = find(\"Canvas/bulletLayer\");\r\n                prefab.setWorldPosition(wp.x, wp.y, 0);\r\n                prefab.getComponent(\"DangerWindToNear\").init(dir);\r\n            } else {\r\n                this.loadPrefab(\"dangerWindToNear\", (assets) => {\r\n                    plm.addPoolToPools(\"dangerWindToNear\", new NodePool(), assets);\r\n                    let prefab = plm.getFromPool(\"dangerWindToNear\");\r\n                    prefab.parent = find(\"Canvas/bulletLayer\");\r\n                    prefab.setWorldPosition(wp.x, wp.y, 0);\r\n                    prefab.getComponent(\"DangerWindToNear\").init(dir);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    // 使用末日风暴\r\n    usingSkillDoomsdayStorm() {\r\n        let dirArr = [[-1, 1], [0, 1], [1, 1], [-1, 0], [1, 0], [-1, -1], [0, -1], [1, -1]];\r\n        let total = 50;\r\n        let queue = new Queue();\r\n        while (total) {\r\n            let prefab = plm.getFromPool(\"doomsdayStorm\");\r\n            if (prefab) queue.enqueue(prefab);\r\n            else {\r\n                this.loadPrefab(\"doomsdayStorm\", (assets) => {\r\n                    plm.addPoolToPools(\"doomsdayStorm\", new NodePool(), assets);\r\n                    let prefab = plm.getFromPool(\"doomsdayStorm\");\r\n                    queue.enqueue(prefab);\r\n                });\r\n            }\r\n            total--;\r\n        }\r\n        let count = 0;\r\n        let fun = () => {\r\n            if (ggd.stopAll) return;\r\n            let prefab = queue.dequeue();\r\n            if (prefab) {\r\n                let dir = dirArr[count % dirArr.length];\r\n                let wp = em.dispatch(\"getHeroWorldPos\");\r\n                prefab.parent = find(\"Canvas/bulletLayer\");\r\n                prefab.setWorldPosition(wp.x, wp.y, 0);\r\n                prefab.getComponent(\"DoomsdayStorm\").init(dir);\r\n                count++;\r\n            } else {\r\n                this.unschedule(fun);\r\n            }\r\n        }\r\n        this.schedule(fun, 1);\r\n    }\r\n    // 使用技能奔雷术\r\n    usingSkillThunderRunning() {\r\n        let dirArr = [[0, 1], [0, -1], [1, 0], [-1, 0]];\r\n        let total = 20;\r\n        let unit = 100;\r\n        let queue = new Queue();\r\n        for (let i = 0; i < total; i++) {\r\n            // let dir = dirArr[i % dirArr.length];\r\n            let prefab = plm.getFromPool(\"thunderRunning\");\r\n            if (prefab) {\r\n                queue.enqueue(prefab);;\r\n            } else {\r\n                this.loadPrefab(\"thunderRunning\", (assets) => {\r\n                    plm.addPoolToPools(\"thunderRunning\", new NodePool(), assets);\r\n                    let prefab = plm.getFromPool(\"thunderRunning\");\r\n                    queue.enqueue(prefab);\r\n                });\r\n            }\r\n        }\r\n        let count = 0;\r\n        let fun = () => {\r\n            if (ggd.stopAll) return;\r\n            let prefab = queue.dequeue();\r\n            if (prefab) {\r\n                let dir = dirArr[count % dirArr.length];\r\n                prefab.parent = find(\"Canvas/bulletLayer\");\r\n                let wp = em.dispatch(\"getHeroWorldPos\");\r\n                // prefab.setWorldPosition(wp.x + dir[0] * unit, wp.y + dir[1] * unit, wp.z);\r\n                prefab.setWorldPosition(wp);\r\n                prefab.getComponent(\"ThunderRunning\").init({ x: dir[0], y: dir[1] });\r\n                count++;\r\n            } else {\r\n                this.unschedule(fun);\r\n            }\r\n        }\r\n        this.schedule(fun, 1);\r\n    }\r\n    // 使用技能雷裂珠\r\n    usingSkillThunderFissionBead() {\r\n        let flyDir = this.getFlyDir(em.dispatch(\"getHeroControlProperty\", \"_curAimDir\"));\r\n        let prefab = plm.getFromPool(\"thunderFissionBead\");\r\n        // let skillData = em.dispatch(\"usingHeroBasePropertyFun\", \"getSkillBookDataByIdOrName\", \"thunderFissionBead\");\r\n        if (prefab) {\r\n            prefab.parent = find(\"Canvas/bulletLayer\");\r\n            let wp = em.dispatch(\"getHeroWorldPos\");\r\n            prefab.setWorldPosition(wp);\r\n            prefab.getComponent(\"ThunderFissionBead\").init(5, flyDir);\r\n        } else {\r\n            this.loadPrefab(\"thunderFissionBead\", (assets) => {\r\n                plm.addPoolToPools(\"thunderFissionBead\", new NodePool(), assets);\r\n                let prefab = plm.getFromPool(\"thunderFissionBead\");\r\n                prefab.parent = find(\"Canvas/bulletLayer\");\r\n                let wp = em.dispatch(\"getHeroWorldPos\");\r\n                prefab.setWorldPosition(wp);\r\n                // prefab.getComponent(\"ThunderFissionBead\").init(8,flyDir);\r\n                prefab.getComponent(\"ThunderFissionBead\").init(5, flyDir);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @description 使用装备 目前只有法器\r\n     * 判断是否有装备， 没装备 关闭武器进度条 否则打开，开始计时\r\n    */\r\n    usingEqu() {\r\n        let data = em.dispatch(\"usingHeroBasePropertyFun\", \"getCurHeroUsingWeaponData\");\r\n        console.log(\"usingEqu\", data);\r\n        if (!data) {//没装备法器\r\n            this.equWeaponCDProgress.node.parent.active = false;\r\n            return;\r\n        }\r\n        this.usingEquWeapon();\r\n        this.equWeaponCDProgress.node.parent.active = true;\r\n        let interval = this.getCurUsingWeaponAttackInterval();\r\n        this._equWeaTotalCD = interval;\r\n        this._equWeaCurTime = 0;\r\n        //无cd流  5002巨剑无cd流\r\n        if (data.qData.effect.indexOf(5002) > -1) {\r\n            this._equWeaCurTime = this._equWeaTotalCD;\r\n            this.updateEquWeaProgress();\r\n            return;\r\n        }\r\n        let t = 0.025;\r\n        this.schedule(() => {\r\n            if (ggd.stopAll) return;\r\n            this._equWeaCurTime += t;\r\n            this.updateEquWeaProgress();\r\n            if (this._equWeaCurTime >= this._equWeaTotalCD) {\r\n                this._equWeaCurTime = 0;\r\n                this.usingEquWeapon();\r\n            };\r\n        }, t);\r\n\r\n    }\r\n    // 刷新装备 武器 进度条\r\n    updateEquWeaProgress() {\r\n        this.equWeaponCDProgress.fillRange = this._equWeaCurTime / this._equWeaTotalCD;\r\n    }\r\n    // 使用当前装备\r\n    usingEquWeapon() {\r\n        let weapon = em.dispatch(\"usingHeroBasePropertyFun\", \"getCurHeroUsingWeaponType\");\r\n        switch (weapon) {\r\n            case \"长剑\":\r\n                this.createLongSword();\r\n                break;\r\n            case \"巨剑\":\r\n                this.createGiantSword();\r\n                break;\r\n            case \"巨斧\":\r\n                this.createGiantAxe();\r\n                break;\r\n            case \"旋转斧\":\r\n                this.createRotationAxe();\r\n                break;\r\n            case \"巨弩\":\r\n                this.createGiantArrow();\r\n                break;\r\n            case \"连弩\":\r\n                this.createContinueArrow();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    // ====================法器类=========================\r\n\r\n    // ===================长剑======================\r\n    // 创建 长剑暂时使用的剑的数据 待修改\r\n    usingLongSword() {\r\n        let interval = this.getCurUsingWeaponAttackInterval();\r\n        this.schedule(() => {\r\n            this.createLongSword();\r\n        }, interval);\r\n\r\n    }\r\n    createLongSword() {\r\n        if (ggd.stopAll) return;\r\n        let total = 2;\r\n        let data = em.dispatch(\"usingHeroBasePropertyFun\", \"getCurHeroUsingWeaponData\");\r\n        console.log(\"createLongSword\", data);\r\n\r\n        if (data.qData.effect.indexOf(5003) > -1) total = 4;//横少千军\r\n        if (data.qData.effect.indexOf(5004) > -1) total = 8;//上古剑气\r\n\r\n        let flyDirs = [\r\n            { x: -1, y: 0 }, { x: 1, y: 0 }, { x: 0, y: 1 }, { x: 0, y: -1 },\r\n            { x: -1, y: -1 }, { x: 1, y: 1 }, { x: -1, y: 1 }, { x: 1, y: -1 }\r\n        ];\r\n        for (let i = 0; i < total; i++) {\r\n            let sword = plm.getFromPool(\"longSword\");\r\n            if (sword) this.initLongSword(sword, flyDirs[i]);\r\n            else {\r\n                this.loadPrefab(\"longSword\", (assets) => {\r\n                    plm.addPoolToPools(\"longSword\", new NodePool(), assets);\r\n                    sword = plm.getFromPool(\"longSword\");\r\n                    this.initLongSword(sword, flyDirs[i]);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    initLongSword(sword, flyDir) {\r\n        sword.setPosition(0, 0, 0);\r\n        let layer = find(\"Canvas/bulletLayer\");\r\n        sword.parent = layer;\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        // wp.x += (flyDir.x * 10);\r\n        // wp.y += (flyDir.y * 10);\r\n        console.log(\"initLongSword\", wp);\r\n\r\n        sword.setWorldPosition(wp.x, wp.y, wp.z);\r\n        sword.getComponent(\"LongSword\").init(flyDir);\r\n        console.log(\"long sword\", sword);\r\n    }\r\n    // ===================巨剑======================\r\n    usingGiantSword() {\r\n        //拥有诸神之力 仅创建一次\r\n        let data = em.dispatch(\"usingHeroBasePropertyFun\", \"getCurHeroUsingWeaponData\");\r\n        if (data.qData.effect.indexOf(5002) > -1) {\r\n            this.createGiantSword();\r\n            return;\r\n        }\r\n        let interval = this.getCurUsingWeaponAttackInterval();\r\n        this.schedule(() => {\r\n            this.createGiantSword();\r\n        }, interval);\r\n    }\r\n    createGiantSword() {\r\n        if (ggd.stopAll) return;\r\n        let giantSword = plm.getFromPool(\"giantSword\");\r\n        if (giantSword) this.initGiantSword(giantSword);\r\n        else {\r\n            this.loadPrefab(\"giantSword\", (assets) => {\r\n                plm.addPoolToPools(\"giantSword\", new NodePool(), assets);\r\n                giantSword = plm.getFromPool(\"giantSword\");\r\n                this.initGiantSword(giantSword);\r\n            });\r\n        };\r\n    }\r\n    initGiantSword(giantSword) {\r\n        giantSword.setPosition(0, 0, 0);\r\n        giantSword.parent = find(\"Canvas/heroLayer/skillParent\");\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        giantSword.setWorldPosition(wp.x, wp.y, wp.z);\r\n        giantSword.getComponent(\"GiantSword\").init();\r\n        console.log(\"initGiantSword\", giantSword);\r\n    }\r\n    //===================巨斧=====================\r\n    usingGiantAxe() {\r\n        let interval = this.getCurUsingWeaponAttackInterval();\r\n        this.schedule(() => {\r\n            this.createGiantAxe();\r\n        }, interval);\r\n    }\r\n    createGiantAxe() {\r\n        if (ggd.stopAll) return;\r\n        let giantAxe = plm.getFromPool(\"giantAxe\");\r\n        if (giantAxe) this.initGiantAxe(giantAxe);\r\n        else {\r\n            this.loadPrefab(\"giantAxe\", (assets) => {\r\n                plm.addPoolToPools(\"giantAxe\", new NodePool(), assets);\r\n                giantAxe = plm.getFromPool(\"giantAxe\");\r\n                this.initGiantAxe(giantAxe);\r\n            });\r\n        }\r\n    }\r\n    initGiantAxe(giantAxe) {\r\n        giantAxe.setPosition(0, 0, 0);\r\n        // let layer = find(\"Canvas/bulletLayer\");\r\n        let layer = find(\"Canvas/heroLayer/skillParent\");\r\n        giantAxe.parent = layer;\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        giantAxe.setWorldPosition(wp.x, wp.y, wp.z);\r\n        giantAxe.getComponent(\"GiantAxe\").init();\r\n        console.log(\"initGiantAxe\", giantAxe);\r\n    }\r\n    //===================旋转斧=====================\r\n    usingRotationAxe() {\r\n        let interval = this.getCurUsingWeaponAttackInterval();\r\n        this.schedule(() => {\r\n            this.createRotationAxe();\r\n        }, interval);\r\n    }\r\n    // 创建旋转斧\r\n    createRotationAxe() {\r\n        if (ggd.stopAll) return;\r\n        let rotationAxe = plm.getFromPool(\"rotationAxe\");\r\n        if (rotationAxe) this.initRotationAxe(rotationAxe);\r\n        else {\r\n            this.loadPrefab(\"rotationAxe\", (assets) => {\r\n                plm.addPoolToPools(\"rotationAxe\", new NodePool(), assets);\r\n                rotationAxe = plm.getFromPool(\"rotationAxe\");\r\n                this.initRotationAxe(rotationAxe);\r\n            });\r\n        }\r\n    }\r\n    initRotationAxe(rotationAxe) {\r\n        rotationAxe.setPosition(0, 0, 0);\r\n        // let layer = find(\"Canvas/bulletLayer\");\r\n        rotationAxe.parent = find(\"Canvas/heroLayer/skillParent\");\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        rotationAxe.setWorldPosition(wp.x, wp.y, wp.z);\r\n        rotationAxe.getComponent(\"RotationAxe\").init();\r\n    }\r\n    // =================巨弩==================\r\n    usingGiantArrow() {\r\n        let interval = this.getCurUsingWeaponAttackInterval();\r\n        this.createGiantArrow();\r\n        this.schedule(() => {\r\n            this.createGiantArrow();\r\n        }, interval);\r\n    }\r\n    createGiantArrow() {\r\n        if (ggd.stopAll) return;\r\n        let giantArrow = plm.getFromPool(\"giantArrow\");\r\n        if (giantArrow) this.initGiantArrow(giantArrow);\r\n        else {\r\n            this.loadPrefab(\"giantArrow\", (assets) => {\r\n                plm.addPoolToPools(\"giantArrow\", new NodePool(), assets);\r\n                giantArrow = plm.getFromPool(\"giantArrow\");\r\n                this.initGiantArrow(giantArrow);\r\n            });\r\n        }\r\n    }\r\n    initGiantArrow(giantArrow) {\r\n        giantArrow.setPosition(0, 0, 0);\r\n        giantArrow.parent = find(\"Canvas/bulletLayer\");\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        giantArrow.setWorldPosition(wp.x, wp.y, wp.z);\r\n        giantArrow.getComponent(\"GiantArrow\").init();\r\n        // console.log(\"initGiantArrow\", giantArrow);\r\n    }\r\n    // =================连弩==================\r\n    usingContinueArrow() {\r\n        let interval = this.getCurUsingWeaponAttackInterval();\r\n        this.schedule(() => {\r\n            this.createContinueArrow();\r\n        }, interval);\r\n    }\r\n    createContinueArrow() {\r\n        if (ggd.stopAll) return;\r\n        let continueArrow = plm.getFromPool(\"continueArrow\");\r\n        if (continueArrow) this.initContinueArrow(continueArrow);\r\n        else {\r\n            this.loadPrefab(\"continueArrow\", (assets) => {\r\n                plm.addPoolToPools(\"continueArrow\", new NodePool(), assets);\r\n                continueArrow = plm.getFromPool(\"continueArrow\");\r\n                this.initContinueArrow(continueArrow);\r\n            });\r\n        }\r\n    }\r\n    initContinueArrow(continueArrow) {\r\n        continueArrow.setPosition(0, 0, 0);\r\n        continueArrow.parent = find(\"Canvas/bulletLayer\");\r\n        let wp = em.dispatch(\"getHeroWorldPos\");\r\n        let pos = {\r\n            x: Math.random() * 30,\r\n            y: Math.random() * 30,\r\n        };\r\n        continueArrow.setWorldPosition(wp.x + pos.x, wp.y + pos.y, wp.z);\r\n        continueArrow.getComponent(\"ContinueArrow\").init();\r\n    }\r\n    //======================法器公用方法===================\r\n    getCurUsingWeaponAttackInterval() {\r\n        let data = em.dispatch(\"usingHeroBasePropertyFun\", \"getCurHeroUsingWeaponData\");\r\n        let interval = data.lData.attackInterval;\r\n        if (data.qData.effect.indexOf(2) > -1) interval *= 2;\r\n        if (data.qData.effect.indexOf(1001) > -1) interval *= 0.5;\r\n        console.log(\"getCurUsingWeaponAttackInterval\", interval);\r\n        return interval;\r\n    }\r\n    // 产生冲击波\r\n    createShockWave(wp, flyDir) {\r\n        let shockWave = plm.getFromPool(\"shockWave\");\r\n        if (shockWave) this.initShockWave(shockWave, wp, flyDir);\r\n        else {\r\n            this.loadPrefab(\"shockWave\", (assets) => {\r\n                plm.addPoolToPools(\"shockWave\", new NodePool(), assets);\r\n                shockWave = plm.getFromPool(\"shockWave\");\r\n                this.initShockWave(shockWave, wp, flyDir);\r\n            });\r\n        }\r\n    }\r\n    // 初始化冲击波\r\n    initShockWave(shockWave, wp, flyDir) {\r\n        shockWave.setPosition(0, 0, 0);\r\n        shockWave.parent = find(\"Canvas/bulletLayer\");\r\n        shockWave.setWorldPosition(wp);\r\n        shockWave.getComponent(\"ShockWave\").init(flyDir);\r\n    }\r\n    // //通用按钮入口 用于解决因脚本函数过多找不到具体方法\r\n    // commonBtnEnter(e,p){\r\n    //     if(this.hasOwnProperty(p)) this[p]();\r\n    // }\r\n}\r\n\r\n"]}