{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/TSGFDemo/Demo/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/enemy/boss/Boss9.ts"],"names":["_decorator","find","instantiate","Animation","em","Boss","ccclass","property","Boss9","_skillData","Infinity","onLoad","bossData","dispatch","canMove","normalParticle","damage","normalDamage","initBossInfo","setBossStrategy","schedule","usingNormalParticleOneShot","usingNormalParticleTriangle","createTipsPrefab","prefab","node","targetPos","posArr","pos","tips","parent","setWorldPosition","x","y","z","active","anim","getComponent","on","destroy","createIce","ice","init"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, find, instantiate, Animation } from 'cc';\r\nimport { em } from '../../global/EventManager';\r\nimport { Boss } from './Boss';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Boss9')\r\nexport class Boss9 extends Boss {\r\n    _skillData = {\r\n        \"normalParticle\": {\r\n            \"name\": \"normalParticle\",\r\n            \"damage\": 2500,\r\n            \"duration\": 3,\r\n            \"moveSpeed\": 500,\r\n            \"canAttackTimes\": 1,\r\n        },\r\n        \"ice\": {\r\n            \"name\": \"ice\",\r\n            \"damage\": 10,\r\n            \"duration\": 5,\r\n            \"moveSpeed\": 0,\r\n            \"canAttackTimes\": Infinity,\r\n            \"attackInterval\": 1,\r\n            \"effects\": [\"slow\"]\r\n        }\r\n    };\r\n\r\n    onLoad() {\r\n        let bossData = em.dispatch(\"usingHeroBasePropertyFun\", \"getBossDataById\", 9);\r\n        bossData.canMove = true;\r\n        this._skillData.normalParticle.damage = bossData.normalDamage;\r\n        this.initBossInfo(bossData);\r\n        this.setBossStrategy();\r\n    }\r\n    setBossStrategy() {\r\n        this.schedule(() => {\r\n            this.usingNormalParticleOneShot(0.5);\r\n        }, 1);\r\n        // this.schedule(() => {\r\n        //     this.usingNormalParticleCircle(12, 50, 0.5);\r\n        // }, 2);\r\n        this.schedule(() => {\r\n            this.usingNormalParticleTriangle(0.5);\r\n        }, 5);\r\n\r\n        this.schedule(() => {\r\n            this.createTipsPrefab();\r\n        }, 6);\r\n    }\r\n    createTipsPrefab() {\r\n        let prefab = find(\"tips\", this.node);\r\n        let targetPos = em.dispatch(\"getHeroWorldPos\");\r\n        // let posArr = [[-200, 0], [200, 0], [0, -200], [0, 200]];\r\n        let posArr = [[-200, 0], [200, 0], [0, -200], [0, 200],\r\n        [-200,-200],[200,-200],[-200,200],[200,200],];\r\n        for (const pos of posArr) {\r\n            let tips = instantiate(prefab);\r\n            tips.parent = find(\"Canvas/bulletLayer\");\r\n            tips.setWorldPosition(targetPos.x + pos[0], targetPos.y + pos[1], targetPos.z);\r\n            tips.active = true;\r\n            let anim: any = tips.getComponent(Animation);\r\n            anim.on(\"finished\", () => {\r\n                if (!anim) return;\r\n                tips.destroy();\r\n                this.createIce([targetPos.x + pos[0], targetPos.y + pos[1]]);\r\n            });\r\n        }\r\n    }\r\n    // 创建冰块\r\n    createIce(pos) {\r\n        let prefab = find(\"icePrefab\", this.node);\r\n        let ice: any = instantiate(prefab);\r\n        ice.parent = find(\"Canvas/bulletLayer\");\r\n        ice.setWorldPosition(pos[0], pos[1], 0);\r\n        ice.active = true;\r\n        ice.getComponent(\"EnemySkill\").init(this._skillData.ice);\r\n    }\r\n}\r\n\r\n"]}