{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/Cocos/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/hero/weapon/LandFire.ts"],"names":["_decorator","tween","Vec3","Sprite","Color","tagData","Weapon","ccclass","property","LandFire","_canMove","init","data","lv","flyDir","initWeaponInfo","initBoxCollider","sword","x","y","playShotAnim","onDisable","node","setScale","update","dt","weaponDuration","animT","dis","scale","t1","by","eulerAngles","position","_flyDir","onUpdate","target","ratio","color","getComponent","lerp","r","g","b","start"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA6BC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;;AAClDC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,M,iBAAAA,M;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;0BAGjBS,Q,WADZF,OAAO,CAAC,UAAD,C,gBAAR,MACaE,QADb;AAAA;AAAA,4BACqC;AAAA;AAAA;AAAA,eACjCC,QADiC,GACtB,KADsB;AAAA;;AAEjCC,QAAAA,IAAI,CAACC,IAAD,EAAOC,EAAP,EAAWC,MAAX,EAA6C;AAC7C,eAAKC,cAAL,CAAoBF,EAApB,EAAwBD,IAAxB,EAA8BE,MAA9B;AACA,eAAKE,eAAL,CAAqB;AAAA;AAAA,kCAAQC,KAA7B,EAAoC;AAAEC,YAAAA,CAAC,EAAE,CAAC,EAAN;AAAUC,YAAAA,CAAC,EAAE,CAAC;AAAd,WAApC;AACA,eAAKC,YAAL;AACH;;AACDC,QAAAA,SAAS,GAAE;AACP,eAAKC,IAAL,CAAUC,QAAV,CAAmB,IAAIrB,IAAJ,CAAS,CAAT,EAAW,CAAX,EAAa,CAAb,CAAnB,EADO,CAEP;AACH;;AACDsB,QAAAA,MAAM,CAACC,EAAD,EAAI;AACN,eAAKC,cAAL,CAAoBD,EAApB;AACH;;AACDL,QAAAA,YAAY,GAAE;AACV,cAAIO,KAAK,GAAG,GAAZ;AACA,cAAIC,GAAG,GAAG,GAAV;AACA,cAAIC,KAAK,GAAG,GAAZ;AACA,cAAIC,EAAE,GAAG7B,KAAK,CAAC,KAAKqB,IAAN,CAAL,CAAiBS,EAAjB,CAAoBJ,KAApB,EAA0B;AAACE,YAAAA,KAAK,EAAC,IAAI3B,IAAJ,CAAS2B,KAAT,EAAeA,KAAf,EAAqB,CAArB,CAAP;AAC/BG,YAAAA,WAAW,EAAC,IAAI9B,IAAJ,CAAS,CAAT,EAAW,CAAX,EAAa,GAAb,CADmB;AAE/B+B,YAAAA,QAAQ,EAAC,IAAI/B,IAAJ,CAAS,KAAKgC,OAAL,CAAahB,CAAb,GAAeU,GAAxB,EAA4B,KAAKM,OAAL,CAAaf,CAAb,GAAeS,GAA3C,EAA+C,CAA/C;AAFsB,WAA1B,EAEuD;AAC5DO,YAAAA,QAAQ,EAAE,CAACC,MAAD,EAAcC,KAAd,KAAwB;AAC9B,kBAAIC,KAAK,GAAGF,MAAM,CAACG,YAAP,CAAoBpC,MAApB,EAA4BmC,KAAxC;AACAF,cAAAA,MAAM,CAACG,YAAP,CAAoBpC,MAApB,EAA4BmC,KAA5B,GAAoClC,KAAK,CAACoC,IAAN,CAAW,IAAIpC,KAAJ,EAAX,EAAwBkC,KAAxB,EAA+B,IAAIlC,KAAJ,CAAUkC,KAAK,CAACG,CAAhB,EAAmBH,KAAK,CAACI,CAAzB,EAA4BJ,KAAK,CAACK,CAAlC,EAAqC,GAArC,CAA/B,EAA0EN,KAA1E,CAApC;AACH;AAJ2D,WAFvD,CAAT;AAQAP,UAAAA,EAAE,CAACc,KAAH,GAZU,CAaV;AACA;AACA;AACH;;AA9BgC,O","sourcesContent":["import { _decorator, Component, Node, tween, Vec3, Sprite, Color } from 'cc';\r\nimport { tagData } from '../../global/globalData';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LandFire')\r\nexport class LandFire extends Weapon {\r\n    _canMove = false;\r\n    init(data, lv, flyDir: { x: number, y: number }) {\r\n        this.initWeaponInfo(lv, data, flyDir);\r\n        this.initBoxCollider(tagData.sword, { x: -20, y: -20 });\r\n        this.playShotAnim();\r\n    }\r\n    onDisable(){\r\n        this.node.setScale(new Vec3(1,1,1));\r\n        // this.node.getComponent(Sprite).color = new Color(255,255,255,0);\r\n    }\r\n    update(dt){\r\n        this.weaponDuration(dt);\r\n    }\r\n    playShotAnim(){\r\n        let animT = 0.5;\r\n        let dis = 280;\r\n        let scale = 1.5;\r\n        let t1 = tween(this.node).by(animT,{scale:new Vec3(scale,scale,1),\r\n            eulerAngles:new Vec3(0,0,360),\r\n            position:new Vec3(this._flyDir.x*dis,this._flyDir.y*dis,0)},{\r\n            onUpdate: (target: any, ratio) => {\r\n                let color = target.getComponent(Sprite).color;\r\n                target.getComponent(Sprite).color = Color.lerp(new Color(), color, new Color(color.r, color.g, color.b, 255), ratio);\r\n            }\r\n        });\r\n        t1.start();\r\n        // let t2 = tween().to(animT,{rotation:new Vec3(0,0,360)});\r\n        // let t = tween(this.node).parallel(t1,t2);\r\n        // t.start();\r\n    }\r\n}\r\n\r\n\r\n"]}