{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/TSGFDemo/Demo/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/mainMenu/HeroInfoLayer.ts"],"names":["_decorator","Component","Node","Prefab","SpriteFrame","instantiate","Sprite","Label","find","Color","tween","Vec3","NodePool","ProgressBar","Slider","Tween","Animation","RichText","em","ggd","glf","plm","ccclass","property","HeroInfoLayer","_curSelectItemData","_tipsViewNode","_itemPrefabArr","_propertyPrefabArr","_btnArr","_HPNode","_SSNode","_eqBtnList","_equPrefab","_layerNode","_config","_nameConfig","percentageBlood","percentageDamage","percentageMoveSpeed","moveSpeed","criticalHitRate","bonusBulletTotal","bonusBulletMoveSpeed","bonusBulletAttackTimes","recoveryHealthy","expAddition","divineStoneAddition","_equProbabilityList","_equList","_rewardConfig","onDestroy","remove","onLoad","add","usingHeroInfoLayerFun","bind","push","node","addPoolToPools","itemPrefab","initRewardConfig","allSD","dispatch","key","Object","prototype","hasOwnProperty","call","data","lv","一阶功法整卷","name","一阶功法整卷Ratio","rareRatio","二阶功法整卷","二阶功法整卷Ratio","三阶功法整卷","三阶功法整卷Ratio","四阶功法整卷","四阶功法整卷Ratio","五阶功法整卷","五阶功法整卷Ratio","console","log","onEnable","guideData","startHeroInfoLayerGuide","onSelectBtn","active","initHeroCurEqu","start","isShowAdBtn","initHeroProperty","string","param","isOpenAd","adGetBox","adGetEqu","i","length","str","curLv","prefab","HPPrefab","parent","HPPrefabPar","sprite","getChildByName","getComponent","loadUrl","assets","spriteFrame","upgrade","createButton","e","p","updateBtnSF","parseInt","onBtn1","onBtn2","index","forEach","btn","selectBtnSF","openLayer","HeroInfoLayerProperty","startPropertyGuide","updateStorageSpace","HeroInfoLayerSpace","startSpaceGuide","layer","onBtnBaseProperty","description","getUpgradeDescription","tipsViewShow","onBtnUpgrade","guideFinger","TrainingLayer","itemName","isCanUpgrade","pLv","pValue","par","target","value","play","pName","itemLv","Math","ceil","warn","itemTotal","lvDetail","v","time","children","animT","t1","to","scale","onUpdate","ratio","color","lerp","r","g","b","t2","wait","delay","t","sequence","shift","putToPool","list","total","getFromPool","itemPrefabPar","itemQBg","quality","initPrefabLv","label","type","onBtnItem","showItemDetail","type2","viewEquDetail","showBtnArr","colorStr","getColorStrByQuality","maskPar","showEquDetail","btnPar","child","indexOf","effects","qData","effect","id","getColorStrByType","lData","baseDamage","damageTimes","attackInterval","blood","CHR","onBtnSell","showProgressBar","onBtnConfirmSell","progress","floor","totalPrice","price","closeProgressBar","onBtnCancelSell","closeItemDetail","pb","slideProgressBar","slider","sellTotal","onBtnUsing","switchEqu","openTreasureChest","openEquBox","gets","getEquByBoxType","probabilityArray","qList","random","probability","weaponName","equ","rewardArr","ratioArr","isSingle","every","reward","onBtnMerge","curTotal","mergeDemandTotal","getTotal","consumeTotal","mergeTarget","equName","takeEqu","curEquName","tips","item","guide","setPosition","a1","by","position","a2","action","repeatForever","tag","stopAllByTag","firstProperty"],"mappings":"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","sourcesContent":["/*\r\n * @Author: li_jiang_wei_12345 739671694@qq.com\r\n * @Date: 2022-09-05 15:09:09\r\n * @LastEditors: li_jiang_wei 739671694@qq.com\r\n * @LastEditTime: 2022-12-10 21:10:26\r\n * @FilePath: \\to-be-immortal\\assets\\script\\mainMenu\\HeroInfoLayer.ts\r\n * @Description: \r\n * \r\n * Copyright (c) 2022 by li_jiang_wei_12345 739671694@qq.com, All Rights Reserved. \r\n */\r\nimport { _decorator, Component, Node, Prefab, SpriteFrame, instantiate, Sprite, Label, find, Color, tween, Vec3, NodePool, ProgressBar, Slider, Tween, Animation, RichText, color } from 'cc';\r\nimport { em } from '../global/EventManager';\r\nimport { ggd } from '../global/globalData';\r\nimport { glf } from '../global/globalFun';\r\nimport { plm } from '../global/PoolManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HeroInfoLayer')\r\nexport class HeroInfoLayer extends Component {\r\n\r\n    @property([SpriteFrame])\r\n    selectBtnSF;\r\n    @property(Prefab)\r\n    HPPrefab;\r\n    @property(Prefab)\r\n    itemPrefab;\r\n    @property(Node)\r\n    HPPrefabPar;\r\n    @property(Node)\r\n    itemPrefabPar;\r\n    @property(Node)\r\n    maskPar;\r\n    @property(Node)\r\n    guideFinger;\r\n    @property(Node)\r\n    adGetBox;\r\n    @property(Node)\r\n    adGetEqu;\r\n    @property([SpriteFrame])\r\n    itemQBg: SpriteFrame[] = [];\r\n\r\n    _curSelectItemData;\r\n    _tipsViewNode: Node;\r\n    _itemPrefabArr: any[] = [];\r\n    _propertyPrefabArr: any[] = [];\r\n    _btnArr = [];\r\n    _HPNode: Node;//英雄属性\r\n    _SSNode: Node;//仓库\r\n    _eqBtnList = {};//装备按钮清单\r\n    _equPrefab: Node;\r\n    _layerNode = [];\r\n    _config = [\"percentageBlood\", \"percentageDamage\", \"moveSpeed\",\r\n        \"criticalHitRate\", \"bonusBulletMoveSpeed\", \"bonusBulletAttackTimes\",\r\n        \"recoveryHealthy\", \"expAddition\", \"divineStoneAddition\"\r\n    ];\r\n    // _config = [\"percentageBlood\", \"percentageDamage\", \"percentageMoveSpeed\", \"moveSpeed\",\r\n    //     \"criticalHitRate\", \"bonusBulletTotal\", \"bonusBulletMoveSpeed\", \"bonusBulletAttackTimes\",\r\n    //     \"recoveryHealthy\", \"expAddition\", \"divineStoneAddition\"\r\n    // ];\r\n    _nameConfig = {\r\n        percentageBlood: \"血量百分比加成\",\r\n        percentageDamage: \"伤害百分比加成\",\r\n        percentageMoveSpeed: \"移速百分比加成\",\r\n        moveSpeed: \"基础移速\",\r\n        criticalHitRate: \"暴击率\",\r\n        bonusBulletTotal: \"法宝额外数量\",\r\n        bonusBulletMoveSpeed: \"法宝额外飞行速度\",\r\n        bonusBulletAttackTimes: \"法宝穿透次数\",\r\n        recoveryHealthy: \"基础生命恢复\",\r\n        expAddition: \"游戏内经验加成\",\r\n        divineStoneAddition: \"灵石加成\"\r\n    }\r\n    _equProbabilityList = {\r\n        1: [0.9, 0.99, 1],\r\n        2: [0.4, 0.95, 0.99, 1],\r\n        3: [0, 0.5, 0.95, 0.99, 1],\r\n        4: [0, 0.2, 0.6, 0.95, 1],\r\n        5: [0, 0, 0.2, 0.9, 1]\r\n    };\r\n    // _equList = [\"巨剑\", \"长剑\", \"巨弩\", \"连弩\", \"巨斧\", \"旋转斧\"];\r\n    _equList = [\"巨剑\", \"长剑\", \"巨弩\", \"连弩\", \"巨斧\", \"旋转斧\",\"风火轮\",\"筋斗云\",\"重甲\",\"法袍\"];\r\n    //Ratio数组均小于1的 默认只获得一个物品\r\n    _rewardConfig: any;\r\n    onDestroy() {\r\n        em.remove(\"usingHeroInfoLayerFun\");\r\n    }\r\n    onLoad() {\r\n        em.add(\"usingHeroInfoLayerFun\", this.usingHeroInfoLayerFun.bind(this));\r\n        this._btnArr.push(find(\"selectBtnPar/btn1\", this.node));\r\n        this._btnArr.push(find(\"selectBtnPar/btn2\", this.node));\r\n\r\n        this._HPNode = find(\"/heroProperty\", this.node);\r\n        this._SSNode = find(\"/storageSpace\", this.node);\r\n        this._layerNode.push(this._HPNode, this._SSNode);\r\n\r\n        this._tipsViewNode = find(\"/heroProperty/tipsViewShow\", this.node);\r\n\r\n        plm.addPoolToPools(\"SSLItemPrefab\", new NodePool(), this.itemPrefab);\r\n\r\n        this.initRewardConfig();\r\n        // this.initEquipment();\r\n\r\n    }\r\n\r\n\r\n    //初始化宝箱 和 功法卷奖励\r\n    initRewardConfig() {\r\n        //初始化宝箱\r\n        this._rewardConfig = {\r\n            \"一阶宝箱\": [\"一阶妖丹\", \"一阶道法果\", \"一阶功法残卷\", \"灵石\", \"炼气丹\", \"一阶功法整卷\"],\r\n            \"一阶宝箱Ratio\": [30, 5, 5, 500, 5, 0.5],\r\n            \"二阶宝箱\": [\"二阶妖丹\", \"二阶道法果\", \"二阶功法残卷\", \"灵石\", \"筑基丹\", \"二阶功法整卷\"],\r\n            \"二阶宝箱Ratio\": [30, 5, 4, 5000, 5, 0.3],\r\n            \"三阶宝箱\": [\"三阶妖丹\", \"三阶道法果\", \"三阶功法残卷\", \"灵石\", \"金元丹\", \"三阶功法整卷\"],\r\n            \"三阶宝箱Ratio\": [30, 5, 3, 50000, 5, 0.1],\r\n            \"四阶宝箱\": [\"四阶妖丹\", \"四阶道法果\", \"四阶功法残卷\", \"灵石\", \"元婴丹\", \"四阶功法整卷\"],\r\n            \"四阶宝箱Ratio\": [30, 5, 1, 500000, 5, 0.1],\r\n            \"五阶宝箱\": [\"五阶妖丹\", \"五阶道法果\", \"五阶功法残卷\", \"灵石\", \"化神丹\", \"五阶功法整卷\"],\r\n            \"五阶宝箱Ratio\": [30, 5, 1, 5000000, 5, 0.1],\r\n            \"一阶功法整卷\": [],\r\n            \"一阶功法整卷Ratio\": [],\r\n            \"二阶功法整卷\": [],\r\n            \"二阶功法整卷Ratio\": [],\r\n            \"三阶功法整卷\": [],\r\n            \"三阶功法整卷Ratio\": [],\r\n            \"四阶功法整卷\": [],\r\n            \"四阶功法整卷Ratio\": [],\r\n            \"五阶功法整卷\": [],\r\n            \"五阶功法整卷Ratio\": [],\r\n        };\r\n        // 初始化功法卷奖励 \r\n        let allSD = em.dispatch(\"usingHeroBasePropertyFun\", \"getAllAboutSkillBook\");\r\n        for (const key in allSD) {\r\n            if (Object.prototype.hasOwnProperty.call(allSD, key)) {\r\n                const data = allSD[key];\r\n                switch (data.lv) {\r\n                    case 1:\r\n                        this._rewardConfig.一阶功法整卷.push(data.name);\r\n                        this._rewardConfig.一阶功法整卷Ratio.push(data.rareRatio);\r\n                        break;\r\n                    case 2:\r\n                        this._rewardConfig.二阶功法整卷.push(data.name);\r\n                        this._rewardConfig.二阶功法整卷Ratio.push(data.rareRatio);\r\n                        break;\r\n                    case 3:\r\n                        this._rewardConfig.三阶功法整卷.push(data.name);\r\n                        this._rewardConfig.三阶功法整卷Ratio.push(data.rareRatio);\r\n                        break;\r\n                    case 4:\r\n                        this._rewardConfig.四阶功法整卷.push(data.name);\r\n                        this._rewardConfig.四阶功法整卷Ratio.push(data.rareRatio);\r\n                        break;\r\n                    case 5:\r\n                        this._rewardConfig.五阶功法整卷.push(data.name);\r\n                        this._rewardConfig.五阶功法整卷Ratio.push(data.rareRatio);\r\n                        break;\r\n\r\n                    default:\r\n                        throw \"暂未处理：\" + data.lv + \"阶功法。\"\r\n                }\r\n            }\r\n        }\r\n        console.log(\"_rewardConfig\", this._rewardConfig);\r\n    }\r\n    onEnable() {\r\n        let guideData = em.dispatch(\"getGuideData\");\r\n        if (!guideData.HeroInfoLayer) {\r\n            this.startHeroInfoLayerGuide();\r\n        }\r\n        this.onSelectBtn(null, \"2\");\r\n        // this.onSelectBtn(null, \"1\");\r\n        find(\"/itemDetail/ProgressBar\", this.node).active = false;\r\n        find(\"/itemDetail\", this.node).active = false;\r\n        this.initHeroCurEqu();\r\n    }\r\n    start() {\r\n        this.isShowAdBtn();\r\n        this.initHeroProperty();\r\n    }\r\n    //HeroInfoLayer 方法\r\n    usingHeroInfoLayerFun(string, ...param) {\r\n        if (this[string] && typeof this[string] == \"function\") return this[string](...param);\r\n        else throw string + \" is not fun or undefined\";\r\n    }\r\n    //是否展示广告按钮\r\n    isShowAdBtn() {\r\n        if (ggd.isOpenAd) {\r\n            this.adGetBox.active = true;\r\n        } else this.adGetBox.active = false;\r\n        if (ggd.isOpenAd && !em.dispatch(\"usingGameRewardFun\", \"todayEquVideoIsCanShow\")) this.adGetEqu.active = true;\r\n        else this.adGetEqu.active = false;\r\n    }\r\n    // 初始化属性\r\n    initHeroProperty() {\r\n        for (let i = 0; i < this._config.length; i++) {\r\n            let str = this._config[i];\r\n            let curLv = em.dispatch(\"usingHeroBasePropertyFun\", \"getHeroBasePropertyCurLv\", str);\r\n            let prefab = instantiate(this.HPPrefab);\r\n            prefab.parent = this.HPPrefabPar;\r\n            let sprite = prefab.getChildByName(\"icon\").getComponent(Sprite);\r\n            // let loadUrl = \"images/icons/icon_\" + str + \"/spriteFrame\";\r\n            let loadUrl = \"images/icons/baseProperty/icon_\" + str + \"/spriteFrame\";\r\n            em.dispatch(\"loadTheDirResources\", loadUrl, (assets) => sprite.spriteFrame = assets);\r\n            // prefab.getChildByName(\"description\").getComponent(Label).string = this._nameConfig[str] + \":\" + curLv;\r\n            prefab.getChildByName(\"description\").getComponent(Label).string = \"Lv:\" + curLv + \"\\n\" + this._nameConfig[str];\r\n            prefab.getChildByName(\"value\").getComponent(Label).string = em.dispatch(\"usingHeroBasePropertyFun\", \"getHeroBaseProperty\", str);\r\n            let upgrade = prefab.getChildByName(\"upgrade\");\r\n            glf.createButton(this.node, prefab.getChildByName(\"icon\"), \"HeroInfoLayer\", \"onBtnBaseProperty\", str);\r\n            glf.createButton(this.node, upgrade, \"HeroInfoLayer\", \"onBtnUpgrade\", str);\r\n            this._propertyPrefabArr.push(prefab);\r\n        }\r\n    }\r\n    onSelectBtn(e, p) {\r\n        if (e !== null) em.dispatch(\"playOneShot\", \"common/通用按键\");\r\n        this.updateBtnSF(parseInt(p) - 1);\r\n\r\n        switch (p) {\r\n            case \"1\":\r\n                this.onBtn1();\r\n                break;\r\n            case \"2\":\r\n                this.onBtn2();\r\n                break;\r\n\r\n            default:\r\n                throw \"p is err,current p is \" + p;\r\n        }\r\n    }\r\n    updateBtnSF(index) {\r\n        this._btnArr.forEach((btn, i) => {\r\n            if (i == index) {\r\n                btn.getComponent(Sprite).spriteFrame = this.selectBtnSF[2 * i + 1];\r\n            } else {\r\n                btn.getComponent(Sprite).spriteFrame = this.selectBtnSF[2 * i];\r\n            }\r\n        });\r\n    }\r\n    onBtn1() {\r\n        this.openLayer(this._HPNode);\r\n        let guideData = em.dispatch(\"getGuideData\");\r\n        if (!guideData.HeroInfoLayerProperty) this.startPropertyGuide();\r\n    }\r\n    onBtn2() {\r\n        this.updateStorageSpace();\r\n        this.openLayer(this._SSNode);\r\n        let guideData = em.dispatch(\"getGuideData\");\r\n        if (!guideData.HeroInfoLayerSpace) this.startSpaceGuide();\r\n    }\r\n    openLayer(node: Node) {\r\n        this._layerNode.forEach(layer => {\r\n            if (node == layer) layer.active = true;\r\n            else layer.active = false;\r\n        });\r\n    }\r\n    //动态创建的按钮事件 \r\n    onBtnBaseProperty(e, p) {\r\n        console.log(\"p\", p);\r\n        let description = this.getUpgradeDescription(p);\r\n        this.tipsViewShow(description, 3);\r\n    }\r\n    // 升级基础属性\r\n    onBtnUpgrade(e, p) {\r\n        this.guideFinger.active = false;\r\n        if (!em.dispatch(\"getGuideData\").TrainingLayer) {\r\n            em.dispatch(\"initMainMenuByGuideData\");//当前引导完毕且修炼未引导\r\n        }\r\n        //判断道法果是否足够升级\r\n        let itemName = this.isCanUpgrade(p);\r\n        if (itemName) {\r\n            // console.log(\"可以升级\");\r\n            //更新等级 刷新显示\r\n            em.dispatch(\"reduceItemFromSS\", itemName, 1);\r\n            em.dispatch(\"usingHeroBasePropertyFun\", \"upgradeBaseProperty\", p);\r\n            let pLv = em.dispatch(\"usingHeroBasePropertyFun\", \"getHeroBasePropertyCurLv\", p);\r\n            let pValue = em.dispatch(\"usingHeroBasePropertyFun\", \"getHeroBaseProperty\", p);\r\n            let par = e.target.parent;\r\n            par.getChildByName(\"description\").getComponent(Label).string = \"Lv:\" + pLv + \"\\n\" + this._nameConfig[p];\r\n            let value = par.getChildByName(\"value\");\r\n            value.getComponent(Label).string = pValue;\r\n            value.getComponent(Animation).play();\r\n        }\r\n        // let par = e.target\r\n    }\r\n\r\n\r\n\r\n\r\n    // 判断是否能够升级\r\n    isCanUpgrade(pName) {\r\n        let lv = em.dispatch(\"usingHeroBasePropertyFun\", \"getHeroBasePropertyCurLv\", pName);\r\n        if (lv >= 50) {\r\n            em.dispatch(\"tipsViewShow\", \"已到达最大等级 无法升级\");\r\n            return false;\r\n        };\r\n        let itemName = \"\";\r\n        let itemLv = Math.ceil(lv / 10);\r\n        switch (itemLv) {\r\n            case 1:\r\n                itemName = \"一阶道法果\";\r\n                break;\r\n            case 2:\r\n                itemName = \"二阶道法果\";\r\n                break;\r\n            case 3:\r\n                itemName = \"三阶道法果\";\r\n                break;\r\n            case 4:\r\n                itemName = \"四阶道法果\";\r\n                break;\r\n            case 5:\r\n                itemName = \"五阶道法果\";\r\n                break;\r\n\r\n            default:\r\n                console.warn(\"itemLv is \" + itemLv);\r\n                break;\r\n        }\r\n        let itemTotal = em.dispatch(\"getItemTotalByIdOrName\", itemName);\r\n        if (itemTotal > 0) {\r\n            return itemName;\r\n        } else {\r\n            em.dispatch(\"tipsViewShow\", itemName + \"不足,无法升级\");\r\n            return false;\r\n        }\r\n    }\r\n    // 获取升级详细信息\r\n    getUpgradeDescription(pName) {\r\n        let lv = em.dispatch(\"usingHeroBasePropertyFun\", \"getHeroBasePropertyCurLv\", pName);\r\n        let lvDetail = em.dispatch(\"usingHeroBasePropertyFun\", \"getHeroBasePropertyLvDetail\", pName);\r\n        console.log(\"lv\", lv);\r\n        console.log(\"lvDetail\", lvDetail);\r\n        let description = \"\";\r\n        lvDetail.forEach((v, i) => {\r\n            let str = (i + 1) + \":\" + v + \", \";\r\n            description += str;\r\n        });\r\n        return description;\r\n    }\r\n    //显示信息\r\n    tipsViewShow(string: string = \"请传参\", time: number = 1) {\r\n        this._tipsViewNode.children[0].getComponent(Label).string = string;\r\n        let animT = .5;\r\n        let t1 = tween().to(animT, { scale: new Vec3(1, 1, 1) }, {\r\n            onUpdate: (target: any, ratio) => {\r\n                let color = target.getComponent(Sprite).color;\r\n                target.getComponent(Sprite).color = Color.lerp(new Color(), color, new Color(color.r, color.g, color.b, 255), ratio);\r\n            }\r\n        });\r\n        let t2 = tween().to(animT, { scale: new Vec3(1, 1, 1) }, {\r\n            onUpdate: (target: any, ratio) => {\r\n                let color = target.getComponent(Sprite).color;\r\n                target.getComponent(Sprite).color = Color.lerp(new Color(), color, new Color(color.r, color.g, color.b, 0), ratio);\r\n            }\r\n        });\r\n        let wait = tween().delay(time);\r\n        let t = tween(this._tipsViewNode).sequence(t1, wait, t2);\r\n        t.start();\r\n    }\r\n\r\n    // 刷新仓库\r\n    updateStorageSpace() {\r\n        while (this._itemPrefabArr.length > 0) {\r\n            let prefab = this._itemPrefabArr.shift();\r\n            plm.putToPool(\"SSLItemPrefab\", prefab);\r\n        }\r\n        let list = em.dispatch(\"getItemList\");\r\n        for (const key in list) {\r\n            let total = list[key];\r\n            if (key == \"灵石\" || key == \"3\") continue;//不显示灵石\r\n            let data = em.dispatch(\"getItemDataByIdOrName\", key);\r\n            let prefab = plm.getFromPool(\"SSLItemPrefab\");\r\n            prefab.parent = this.itemPrefabPar;\r\n            prefab.getChildByName(\"itemBg\").getComponent(Sprite).spriteFrame = this.itemQBg[data.quality - 1];\r\n            this.initPrefabLv(prefab, data);\r\n            let sprite = prefab.getChildByName(\"sprite\").getComponent(Sprite);\r\n            let loadUrl: string = data.loadUrl;\r\n            if (!data.loadUrl) loadUrl = \"item_default\";\r\n            loadUrl = \"images/items/\" + loadUrl + \"/spriteFrame\";\r\n            em.dispatch(\"loadTheDirResources\", loadUrl, (assets) => sprite.spriteFrame = assets, () => {\r\n                em.dispatch(\"loadTheDirResources\", \"images/items/item_default/spriteFrame\", (assets) => sprite.spriteFrame = assets);\r\n            });\r\n            // prefab.getChildByName(\"total\").getComponent(Label).string = \"X\" + total;\r\n            prefab.getChildByName(\"total\").getComponent(Label).string = total;\r\n            // prefab.getChildByName(\"name\").getComponent(Label).string = data.name;\r\n            prefab.itemName = data.name;//用于索引\r\n            this._itemPrefabArr.push(prefab);\r\n            //创建按钮事件\r\n            glf.createButton(this.node, prefab.getChildByName(\"itemBg\"), \"HeroInfoLayer\", \"onBtnItem\", key);\r\n        }\r\n    }\r\n    // 初始化物品等级\r\n    initPrefabLv(prefab, data) {\r\n        let label = prefab.getChildByName(\"lv\").getComponent(Label);\r\n        if (data.type == \"装备\" && data.lv) {\r\n            console.log(\"初始化阶\");\r\n            let list = { 1: \"一阶\", 2: \"二阶\", 3: \"三阶\", 4: \"四阶\", 5: \"五阶\", 6: \"六阶\", 7: \"七阶\", 8: \"八阶\", 9: \"九阶\" };\r\n            label.string = list[data.lv];\r\n        } else label.string = \"\";\r\n    }\r\n    //点击按钮 \r\n    /**\r\n     * @description:通过物品类型 判断按钮回调\r\n     *              材料 卖出 获取\r\n     *              功法 跳转 功法界面\r\n     *              丹药 跳转 修行界面\r\n     *              道法果 属性学习界面 \r\n     *              消耗品 仓库界面直接使用 \r\n     *              others 只显示描述         \r\n     * @param {*} e\r\n     * @param {*} p\r\n     */\r\n    onBtnItem(e, p) {\r\n        console.log(\"onBtnItem\", p);\r\n        this.guideFinger.active = false;\r\n        let data = em.dispatch(\"getItemDataByIdOrName\", p);\r\n        this._curSelectItemData = data;\r\n        switch (data.type) {\r\n            case \"材料\":\r\n                this.showItemDetail([0]);\r\n                break;\r\n            case \"消耗品\":\r\n                //新手引导，未引导时只出现使用\r\n                if (data.type2 == \"道法果\" && em.dispatch(\"getGuideData\").HeroInfoLayerProperty) this.showItemDetail([0, 1]);\r\n                else this.showItemDetail([0, 1]);\r\n                break;\r\n            case \"others\":\r\n                console.log(\"others 还没写\");\r\n                break;\r\n            case \"可合成材料\":\r\n                this.showItemDetail([0, 2]);\r\n                break;\r\n            case \"装备\":\r\n                this.showItemDetail([0, 1]);\r\n                break;\r\n            default:\r\n                console.warn(\"未处理的类型：\" + data.type);\r\n                break;\r\n        }\r\n    }\r\n    // 查看装备信息\r\n    viewEquDetail(e){\r\n        let node = e.target;\r\n        this._curSelectItemData = node.data;\r\n        this.showItemDetail();\r\n    }\r\n    /**\r\n     * @description: 展示物品细节\r\n     * @param {number} showBtnArr 需要显示的按钮的索引  0:卖出；1:使用 2:合成 \r\n     */\r\n    showItemDetail(showBtnArr: number[]=[]) {\r\n        console.log(\"showItemDetail\", this._curSelectItemData);\r\n        let colorStr = this.getColorStrByQuality(this._curSelectItemData.quality - 1);\r\n        this.maskPar.getChildByName(\"name\").getComponent(RichText).string = colorStr + this._curSelectItemData.name + \"</color>\";\r\n        this.maskPar.getChildByName(\"description\").getComponent(RichText).string = this._curSelectItemData.description;\r\n        if (this._curSelectItemData.type == \"装备\") this.showEquDetail();\r\n        let btnPar = this.maskPar.getChildByName(\"btnPar\");\r\n        btnPar.children.forEach((child, index) => {\r\n            if (showBtnArr.indexOf(index) > -1) child.active = true;\r\n            else child.active = false;\r\n        });\r\n        this.maskPar.active = true;\r\n    }\r\n    showEquDetail() {\r\n        console.log(\"展示装备详情\");\r\n        let data = em.dispatch(\"usingHeroBasePropertyFun\", \"getEquDataByName\", this._curSelectItemData.name);\r\n        let effects = data.qData.effect;\r\n        //根据quality 设置颜色 还没写\r\n        let string = \"\";\r\n        for (const id of effects) {\r\n            let effect = em.dispatch(\"usingHeroBasePropertyFun\", \"getEquEffectData\", id);\r\n            console.log(\"effect\", effect);\r\n            // let colorStr = this.getColorStrByQuality(effect.quality - 1);\r\n            let colorStr = this.getColorStrByType(effect.type - 1);\r\n            string = string + colorStr + effect.name + \":\" + effect.description + \"</color>\\n\";\r\n        }\r\n        if (data.lData.baseDamage) string = string + \"基础伤害:+\" + data.lData.baseDamage + \"\\n\";\r\n        if (data.lData.damageTimes) string = string + \"伤害加成倍数:+\" + data.lData.damageTimes + \"\\n\";\r\n        if (data.lData.attackInterval) string = string + \"攻击间隔:\" + data.lData.attackInterval + \"\\n\";\r\n        if (data.lData.blood) string = string + \"血量:+\" + data.lData.blood + \"\\n\";\r\n        if (data.lData.CHR) string = string + \"暴击率:+\" + data.lData.CHR + \"\\n\";\r\n        if (data.lData.moveSpeed) string = string + \"移动速度:+\" + data.lData.moveSpeed + \"\\n\";\r\n        console.log(\"showEquDetail\", string);\r\n        this.maskPar.getChildByName(\"description\").getComponent(RichText).string = string;\r\n        // console.log(\"showEquDetail\",string);\r\n    } \r\n    // 通过物品品质 获得 物品颜色值\r\n    getColorStrByType(index) {\r\n        index > 2 ? 2 : index;\r\n        return [\"<color=#757575>\", \"<color=#A474CF>\", \"<color=#DDA75A>\"][index];\r\n    }\r\n    getColorStrByQuality(index) {\r\n        index > 4 ? 4 : index;\r\n        return [\"<color=#599A65>\", \"<color=#728CC7>\", \"<color=#A474CF>\", \"<color=#C65C37>\", \"<color=#DDA75A>\"][index];\r\n        // return [\"<color=#7EFFA7>\",\"<color=#7EEAFF>\",\"<color=#837EFF>\",\"<color=#FFB77E>\",\"<color=#FFE000>\"][index];\r\n    }\r\n    onBtnSell() {\r\n        this.showProgressBar();\r\n        this.showItemDetail([3, 4]);\r\n    }\r\n    // 确定卖出\r\n    onBtnConfirmSell() {\r\n        console.log(\"确定卖出\");\r\n        let progress = find(\"/itemDetail/ProgressBar\", this.node).getComponent(ProgressBar).progress;\r\n        let data = this._curSelectItemData;\r\n        let total = em.dispatch(\"getItemTotalByIdOrName\", data.name);\r\n        total = Math.floor(total * progress);\r\n        let totalPrice = data.price * total;\r\n        // console.log(\"卖出物品总数：\" + total);\r\n        // console.log(\"卖出物品总价格：\" + totalPrice);\r\n        em.dispatch(\"reduceItemFromSS\", data.name, total);//卖出物品\r\n        em.dispatch(\"addItemToSS\", \"灵石\", totalPrice);//获得灵石\r\n        this.updateStorageSpace();\r\n        this.maskPar.active = false;\r\n        find(\"Canvas/menuLayer/title/lingshiTotalBg/total\").getComponent(Label).string = em.dispatch(\"getItemTotalByIdOrName\", \"灵石\");\r\n        this.closeProgressBar();\r\n    }\r\n    // 取消卖出\r\n    onBtnCancelSell() {\r\n        // this.closeProgressBar();\r\n        this.closeItemDetail();\r\n    }\r\n    //展示进度条\r\n    showProgressBar() {\r\n        let pb = find(\"/itemDetail/ProgressBar\", this.node);\r\n        pb.getComponent(ProgressBar).progress = 0;\r\n        pb.getComponent(Slider).progress = 0;\r\n        let total = em.dispatch(\"getItemTotalByIdOrName\", this._curSelectItemData.name);\r\n        pb.getChildByName(\"Label\").getComponent(Label).string = \"数量：\" + 0 + \"/\" + total + \"\\n\" + \"价格：0\";\r\n        pb.active = true;\r\n    }\r\n    //关闭进度条\r\n    closeProgressBar() {\r\n        find(\"/itemDetail/ProgressBar\", this.node).active = false;\r\n    }\r\n    // 滑动滑动器  进图条跟随滑动器刷新\r\n    slideProgressBar(slider: Slider) {\r\n        let pb = find(\"/itemDetail/ProgressBar\", this.node);\r\n        let progress = slider.progress;\r\n        pb.getComponent(ProgressBar).progress = progress;\r\n        let total = em.dispatch(\"getItemTotalByIdOrName\", this._curSelectItemData.name);\r\n        let sellTotal = Math.floor(total * progress);\r\n        let totalPrice = sellTotal * this._curSelectItemData.price;\r\n        pb.getChildByName(\"Label\").getComponent(Label).string = \"数量：\" + sellTotal + \"/\" + total + \"\\n\" + \"价格：\" + totalPrice;\r\n    }\r\n    //使用物品\r\n    onBtnUsing() {\r\n\r\n        if (this._curSelectItemData.type == \"装备\") {\r\n            this.closeItemDetail();\r\n            this.switchEqu();\r\n            return;\r\n        }\r\n        switch (this._curSelectItemData.type2) {\r\n            case \"道法果\":\r\n                this.closeItemDetail();\r\n                this.onSelectBtn(null, \"1\");\r\n                break;;\r\n            case \"丹药\":\r\n                this.closeItemDetail();\r\n                em.dispatch(\"switchMainMenuLayer\", null, \"3\");\r\n                break;;\r\n            case \"功法\":\r\n                this.closeItemDetail();\r\n                em.dispatch(\"switchMainMenuLayer\", null, \"5\");\r\n                break;\r\n            case \"宝箱\":\r\n                this.openTreasureChest();\r\n                break;\r\n            case \"装备箱\":\r\n                this.openEquBox();\r\n                break;\r\n            default:\r\n                console.warn(\"未处理的类型\" + this._curSelectItemData.type2);\r\n                break;\r\n        }\r\n\r\n    }\r\n    // 打开装备箱\r\n    openEquBox() {\r\n        em.dispatch(\"reduceItemFromSS\", this._curSelectItemData.name, 1);\r\n        this.maskPar.active = false;\r\n        let gets = this.getEquByBoxType();\r\n        em.dispatch(\"showGets\", gets);\r\n        for (const key in gets) {\r\n            if (Object.prototype.hasOwnProperty.call(gets, key)) {\r\n                // console.log(\"key\", key);\r\n                em.dispatch(\"addItemToSS\", key, gets[key]);\r\n            }\r\n        };\r\n        this.updateStorageSpace();\r\n    }\r\n    // 通过装备箱类型 获得装备\r\n    getEquByBoxType() {\r\n        let gets = {};\r\n        let probabilityArray = this._equProbabilityList[this._curSelectItemData.quality];\r\n        if (!probabilityArray) throw \"probabilityArray is error\";\r\n        let qList = [\"破旧\", \"实用\", \"稀有\", \"传说\", \"史诗\"];\r\n        let random = Math.random();\r\n        let quality: string;\r\n        for (let i = 0; i < probabilityArray.length; i++) {\r\n            let probability = probabilityArray[i];\r\n            if (probability > random) {\r\n                quality = qList[i];\r\n                break;\r\n            }\r\n        };\r\n        if (!quality) throw \"quality is error.\";\r\n        let weaponName = this._equList[Math.random() * this._equList.length | 0];\r\n        let equ = quality + weaponName + \"（一阶）\";\r\n        gets[equ] = 1;\r\n        console.log(\"equ\", equ);\r\n        return gets;\r\n    }\r\n    // 打开宝箱\r\n    openTreasureChest() {\r\n        em.dispatch(\"reduceItemFromSS\", this._curSelectItemData.name, 1);\r\n        this.maskPar.active = false;\r\n        let itemName = this._curSelectItemData.name;\r\n        let rewardArr = this._rewardConfig[itemName];\r\n        let ratioArr = this._rewardConfig[itemName + \"Ratio\"];\r\n        // console.log(\"rewardArr\", rewardArr);\r\n        // console.log(\"ratioArr\", ratioArr);\r\n        let isSingle = ratioArr.every((ratio) => {\r\n            return ratio <= 1;\r\n        });\r\n        let gets = {};\r\n        if (isSingle) {\r\n            let random = Math.random();\r\n            let index: number;\r\n            for (let i = 0; i < ratioArr.length; i++) {\r\n                let ratio = ratioArr[i];\r\n                if (ratio >= random) {\r\n                    index = i;\r\n                    break;\r\n                };\r\n            }\r\n            gets[rewardArr[index]] = 1;\r\n        } else {\r\n            for (let i = 0; i < rewardArr.length; i++) {\r\n                let reward = rewardArr[i];\r\n                let ratio = ratioArr[i];\r\n                if (ratio > 1) {//概率大于1  说明可能不止一个物品\r\n                    let total = Math.random() * ratio | 0;\r\n                    if (total > 0) gets[reward] = total;\r\n                } else {//概率小于1 只有这个物品 且不一定获得\r\n                    if (Math.random() < ratio) gets[reward] = 1;\r\n                };\r\n            };\r\n        }\r\n        console.log(\"gets\", gets);\r\n        em.dispatch(\"showGets\", gets);\r\n        //将获得的物品gets 添加到仓库\r\n        for (const key in gets) {\r\n            if (Object.prototype.hasOwnProperty.call(gets, key)) {\r\n                console.log(\"key\", key);\r\n                em.dispatch(\"addItemToSS\", key, gets[key]);\r\n            }\r\n        }\r\n        this.updateStorageSpace();\r\n        let total = em.dispatch(\"getItemTotalByIdOrName\", \"灵石\");\r\n        find(\"Canvas/menuLayer/title/lingshiTotalBg/total\").getComponent(Label).string = total;\r\n    }\r\n\r\n    //合成\r\n    onBtnMerge() {\r\n        this.maskPar.active = false;\r\n        let data = this._curSelectItemData;\r\n        let curTotal = em.dispatch(\"getItemTotalByIdOrName\", data.name);\r\n        if (curTotal < data.mergeDemandTotal) {\r\n            em.dispatch(\"tipsViewShow\", data.name + \"数量不足，无法合成\");\r\n        } else {\r\n            let getTotal = Math.floor(curTotal / data.mergeDemandTotal);\r\n            let consumeTotal = getTotal * data.mergeDemandTotal;\r\n            em.dispatch(\"reduceItemFromSS\", data.name, consumeTotal);\r\n            em.dispatch(\"addItemToSS\", data.mergeTarget, getTotal);\r\n            let gets = {};\r\n            gets[data.mergeTarget] = getTotal;\r\n            em.dispatch(\"showGets\", gets);\r\n            this.updateStorageSpace();\r\n        }\r\n    }\r\n\r\n\r\n    //关闭物品详情\r\n    closeItemDetail() {\r\n        this.closeProgressBar();\r\n        this.maskPar.active = false;\r\n    }\r\n\r\n    //=====================装备栏=======================\r\n    initHeroCurEqu() {\r\n        let list = em.dispatch(\"usingHeroBasePropertyFun\", \"getAllEquData\");\r\n        // console.log(\"list\", list);\r\n        for (const key in list) {\r\n            const equName = list[key];\r\n            if (equName) {\r\n                let data = em.dispatch(\"getItemDataByIdOrName\", equName);\r\n                // console.log(\"key\", key);\r\n                // console.log(\"data\", data);\r\n                this.takeEqu(key, data);\r\n            }\r\n        }\r\n    }\r\n    // 切换装备\r\n    switchEqu() {\r\n        let data = this._curSelectItemData;\r\n        let type: string = data.type2;\r\n        // 卸下装备\r\n        let curEquName = em.dispatch(\"usingHeroBasePropertyFun\", \"getEquNameByType\", type);\r\n        if (curEquName) em.dispatch(\"addItemToSS\", curEquName, 1);//装备存在 则卸下装备\r\n        // 穿上装备\r\n        this.takeEqu(type, data);\r\n\r\n        em.dispatch(\"usingHeroBasePropertyFun\", \"switchEqu\", type, data.name);\r\n        em.dispatch(\"reduceItemFromSS\", data.name, 1);//装备新装备 从仓库删除物品\r\n        this.updateStorageSpace();// 刷新仓库\r\n    }\r\n    // 穿上装备\r\n    takeEqu(type, data) {\r\n        let loadUrl = data.loadUrl;\r\n        if (!loadUrl) loadUrl = \"item_default\";\r\n        loadUrl = \"images/items/\" + loadUrl + \"/spriteFrame\";\r\n        find(\"heroInfoBg/\" + type, this.node).getComponent(Sprite).spriteFrame = this.itemQBg[data.quality - 1];\r\n        let sprite:any = find(\"heroInfoBg/\" + type + \"/sprite\", this.node).getComponent(Sprite);\r\n        sprite.node.data = data;\r\n        glf.createButton(this.node,sprite.node,\"HeroInfoLayer\",\"viewEquDetail\");\r\n        em.dispatch(\"loadTheDirResources\", loadUrl, (assets) => sprite.spriteFrame = assets);\r\n        let label = find(\"heroInfoBg/\" + type + \"/label\", this.node).getComponent(Label);\r\n        console.log(\"data.lv\", data.lv);\r\n        if (data.lv) {\r\n            let list = { 1: \"一阶\", 2: \"二阶\", 3: \"三阶\", 4: \"四阶\", 5: \"五阶\", 6: \"六阶\", 7: \"七阶\", 8: \"八阶\", 9: \"九阶\" };\r\n            label.string = list[data.lv];\r\n        } else label.string = \"\";\r\n    }\r\n\r\n    // 开始新手引导 设置角色引导完成\r\n    startHeroInfoLayerGuide() {\r\n        em.dispatch(\"setGuideData\", \"HeroInfoLayer\", true);\r\n        find(\"Canvas/menuLayer/guideFinger\").active = false;\r\n    }\r\n    //开始仓库新手引导\r\n    startSpaceGuide() {\r\n        // 赠送物品道法果\r\n        em.dispatch(\"addItemToSS\", \"一阶道法果\", 1);\r\n        let tips = \"获得物品一阶道法果x1\";\r\n        em.dispatch(\"tipsViewShow\", tips);\r\n        this.updateStorageSpace();\r\n        let item = null;\r\n        console.log(\"this._itemPrefabArr\", this._itemPrefabArr);\r\n        for (const prefab of this._itemPrefabArr) {\r\n            if (prefab.itemName == \"一阶道法果\") {\r\n                item = prefab;\r\n                break;\r\n            }\r\n        }\r\n        if (item) {\r\n            let guide = this.guideFinger;\r\n            guide.active = true;\r\n            guide.parent = item;\r\n            guide.setPosition(0, 150, 0);\r\n            let a1 = tween().by(0.5, { position: new Vec3(0, -100, 0) });\r\n            let a2 = tween().by(0.5, { position: new Vec3(0, 100, 0) });\r\n            let action = tween(guide).sequence(a1, a2);\r\n            action = tween(guide).repeatForever(action);\r\n            action.tag(2);\r\n            action.start();\r\n        }\r\n        em.dispatch(\"setGuideData\", \"HeroInfoLayerSpace\", true);\r\n        // em.dispatch(\"initMainMenuByGuideData\");\r\n    }\r\n    //开始属性引导\r\n    startPropertyGuide() {\r\n        Tween.stopAllByTag(2);\r\n        em.dispatch(\"openGuideTips\", \"点击属性末端的按钮+，可以提升相应的属性。一阶道法果可以提升1到10级的基础属性。当等级到达一定程度后必须使用更高阶的道法果提升属性。\");\r\n        let firstProperty = this._propertyPrefabArr[1];\r\n        let guide = this.guideFinger;\r\n        guide.active = true;\r\n        guide.parent = firstProperty.getChildByName(\"upgrade\");\r\n        guide.setPosition(0, 200, 0);\r\n        let a1 = tween().by(0.5, { position: new Vec3(0, -100, 0) });\r\n        let a2 = tween().by(0.5, { position: new Vec3(0, 100, 0) });\r\n        let action = tween(guide).sequence(a1, a2);\r\n        action = tween(guide).repeatForever(action);\r\n        action.tag(2);\r\n        action.start();\r\n        em.dispatch(\"setGuideData\", \"HeroInfoLayerProperty\", true);\r\n    }\r\n}\r\n\r\n\r\n\r\n"]}