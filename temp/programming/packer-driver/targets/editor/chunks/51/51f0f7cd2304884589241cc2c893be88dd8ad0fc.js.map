{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/Cocos/ZA/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/hero/weapon/SpiritBullet.ts"],"names":["_decorator","tagData","Weapon","ccclass","property","SpiritBullet","init","data","lv","flyDir","initWeaponInfo","initCircleCollider","sword","changeBulletRotationByFlyDir","colliderMonster","other","isStopRun","isHasAttacked","node","uuid","updateMonsterBlood","_hasAttackedEnemies","push","_canAttackTimes","recoveryToPool"],"mappings":";;;;;;;;;;;;;;;;;;;;AAUSA,MAAAA,U,OAAAA,U;;AAEAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,M,iBAAAA,M;;;;;;AAbT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;OAKM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;8BAGjBK,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb;AAAA;AAAA,4BACyC;AACrCC,QAAAA,IAAI,CAACC,IAAD,EAAOC,EAAP,EAAWC,MAAX,EAA6C;AAC7C,eAAKC,cAAL,CAAoBF,EAApB,EAAwBD,IAAxB,EAA8BE,MAA9B,EAD6C,CAE7C;;AACA,eAAKE,kBAAL,CAAwB;AAAA;AAAA,kCAAQC,KAAhC,EAH6C,CAI7C;;AACA,eAAKC,4BAAL,GAL6C,CAM7C;AACH;;AACDC,QAAAA,eAAe,CAACC,KAAD,EAAQ;AACnB,cAAI,KAAKC,SAAL,CAAeD,KAAf,CAAJ,EAA2B;AAC3B,cAAI,KAAKE,aAAL,CAAmBF,KAAK,CAACG,IAAN,CAAWC,IAA9B,CAAJ,EAAyC,OAFtB,CAE6B;;AAChD,eAAKC,kBAAL,CAAwBL,KAAxB;;AACA,eAAKM,mBAAL,CAAyBC,IAAzB,CAA8BP,KAAK,CAACG,IAAN,CAAWC,IAAzC;;AACA,eAAKI,eAAL;AACA,cAAI,KAAKA,eAAL,IAAwB,CAA5B,EAA+B,KAAKC,cAAL;AAClC;;AAhBoC,O","sourcesContent":["/*\r\n * @Author: li_jiang_wei_12345 739671694@qq.com\r\n * @Date: 2022-11-17 10:20:41\r\n * @LastEditors: li_jiang_wei_12345 739671694@qq.com\r\n * @LastEditTime: 2022-11-17 10:27:30\r\n * @FilePath: \\to-be-immortal\\assets\\script\\hero\\weapon\\SpiritBullet.ts\r\n * @Description: \r\n * \r\n * Copyright (c) 2022 by li_jiang_wei_12345 739671694@qq.com, All Rights Reserved. \r\n */\r\nimport { _decorator, Component, Node } from 'cc';\r\nimport { em } from '../../global/EventManager';\r\nimport { tagData } from '../../global/globalData';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SpiritBullet')\r\nexport class SpiritBullet extends Weapon {\r\n    init(data, lv, flyDir: { x: number, y: number }) {\r\n        this.initWeaponInfo(lv, data, flyDir);\r\n        // let weaponName: string = data.name;\r\n        this.initCircleCollider(tagData.sword);\r\n        // this.initBoxCollider((tagData.sword));\r\n        this.changeBulletRotationByFlyDir();\r\n        //em.dispatch(\"playOneShot\",\"battle/bullet\");\r\n    }\r\n    colliderMonster(other) {\r\n        if (this.isStopRun(other)) return;\r\n        if (this.isHasAttacked(other.node.uuid)) return;//已经被剑攻击过的对象 忽略后续攻击\r\n        this.updateMonsterBlood(other);\r\n        this._hasAttackedEnemies.push(other.node.uuid);\r\n        this._canAttackTimes--;\r\n        if (this._canAttackTimes <= 0) this.recoveryToPool();\r\n    }\r\n}\r\n\r\n"]}