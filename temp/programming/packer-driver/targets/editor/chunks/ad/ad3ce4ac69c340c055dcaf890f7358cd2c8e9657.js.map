{"version":3,"sources":["file:///C:/Users/Administrator/Desktop/TSGFDemo/Demo/%E4%BF%AE%E4%BA%86%E4%B8%AA%E4%BB%99/assets/script/hero/weapon/IceCone.ts"],"names":["_decorator","em","tagData","Weapon","ccclass","property","IceCone","init","skillData","flyDir","initSkillData","dispatch","data","_damage","damage","_duration","duration","_moveSpeed","moveSpeed","_canAttackTimes","canAttackTimes","_backDis","_attackInterval","_weaponName","name","_flyDir","clearCacheData","initBoxCollider","sword","changeBulletRotationByFlyDir","colliderMonster","other","isStopRun","isHasAttacked","node","uuid","updateMonsterBlood","_hasAttackedEnemies","push","script","getComponent","addDebuffFrozen","recoveryToPool"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAUSA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,E,iBAAAA,E;;AACAC,MAAAA,O,iBAAAA,O;;AAEAC,MAAAA,M,iBAAAA,M;;;;;;AAdT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;OAMM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;yBAGjBM,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb;AAAA;AAAA,4BACoC;AAChCC,QAAAA,IAAI,CAACC,SAAD,EAAWC,MAAX,EAAmB;AACnB,eAAKC,aAAL,CAAmBF,SAAnB,EAA6BC,MAA7B;AACA;AAAA;AAAA,wBAAGE,QAAH,CAAY,aAAZ,EAA0B,eAA1B;AACH;;AACDD,QAAAA,aAAa,CAACE,IAAD,EAAOH,MAAP,EAAe;AACxB,eAAKI,OAAL,GAAeD,IAAI,CAACE,MAApB;AACA,eAAKC,SAAL,GAAiBH,IAAI,CAACI,QAAtB;AACA,eAAKC,UAAL,GAAkBL,IAAI,CAACM,SAAvB;AACA,eAAKC,eAAL,GAAuBP,IAAI,CAACQ,cAA5B;AACA,eAAKC,QAAL,GAAgB,CAAhB;AACA,eAAKC,eAAL,GAAuB,GAAvB;AACA,eAAKC,WAAL,GAAmBX,IAAI,CAACY,IAAxB,CAPwB,CAQxB;;AACA,eAAKC,OAAL,GAAehB,MAAf;AACA,eAAKiB,cAAL;AACA,eAAKC,eAAL,CAAqB;AAAA;AAAA,kCAAQC,KAA7B;AACA,eAAKC,4BAAL;AACH;;AACDC,QAAAA,eAAe,CAACC,KAAD,EAAQ;AACnB,cAAI,KAAKC,SAAL,CAAeD,KAAf,CAAJ,EAA2B;AAC3B,cAAI,KAAKE,aAAL,CAAmBF,KAAK,CAACG,IAAN,CAAWC,IAA9B,CAAJ,EAAyC,OAFtB,CAE6B;;AAChD,eAAKC,kBAAL,CAAwBL,KAAxB;;AACA,eAAKM,mBAAL,CAAyBC,IAAzB,CAA8BP,KAAK,CAACG,IAAN,CAAWC,IAAzC;;AACA,eAAKhB,eAAL;AACA,cAAIoB,MAAM,GAAGR,KAAK,CAACG,IAAN,CAAWM,YAAX,CAAwB,SAAxB,CAAb;AACA,cAAGD,MAAH,EAAWA,MAAM,CAACE,eAAP,CAAuB,CAAvB;AACX,cAAI,KAAKtB,eAAL,IAAwB,CAA5B,EAA+B,KAAKuB,cAAL;AAClC;;AA5B+B,O","sourcesContent":["/*\r\n * @Author: li_jiang_wei_12345 739671694@qq.com\r\n * @Date: 2022-10-20 10:15:07\r\n * @LastEditors: li_jiang_wei_12345 739671694@qq.com\r\n * @LastEditTime: 2022-10-26 15:58:44\r\n * @FilePath: \\copy9train\\assets\\script\\hero\\weapon\\IceCone.ts\r\n * @Description: \r\n * \r\n * Copyright (c) 2022 by li_jiang_wei_12345 739671694@qq.com, All Rights Reserved. \r\n */\r\nimport { _decorator, Component, Node, Vec2 } from 'cc';\r\nimport { em } from '../../global/EventManager';\r\nimport { tagData } from '../../global/globalData';\r\nimport { Sword } from './Sword';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('IceCone')\r\nexport class IceCone extends Weapon {\r\n    init(skillData,flyDir) {\r\n        this.initSkillData(skillData,flyDir);\r\n        em.dispatch(\"playOneShot\",\"battle/frozen\");\r\n    }\r\n    initSkillData(data, flyDir) {\r\n        this._damage = data.damage;\r\n        this._duration = data.duration;\r\n        this._moveSpeed = data.moveSpeed;\r\n        this._canAttackTimes = data.canAttackTimes;\r\n        this._backDis = 0;\r\n        this._attackInterval = 0.5;\r\n        this._weaponName = data.name;\r\n        // this._flyDir = new Vec2(-.25, -1);\r\n        this._flyDir = flyDir;\r\n        this.clearCacheData();\r\n        this.initBoxCollider(tagData.sword);\r\n        this.changeBulletRotationByFlyDir();\r\n    }\r\n    colliderMonster(other) {\r\n        if (this.isStopRun(other)) return;\r\n        if (this.isHasAttacked(other.node.uuid)) return;//已经被剑攻击过的对象 忽略后续攻击\r\n        this.updateMonsterBlood(other);\r\n        this._hasAttackedEnemies.push(other.node.uuid);\r\n        this._canAttackTimes--;\r\n        let script = other.node.getComponent(\"Monster\");\r\n        if(script) script.addDebuffFrozen(5);\r\n        if (this._canAttackTimes <= 0) this.recoveryToPool();\r\n    }\r\n}\r\n\r\n"]}